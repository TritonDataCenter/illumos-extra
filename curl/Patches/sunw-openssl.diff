diff -ur curl-7.27.0/configure curl-7.27.0-32/configure
--- curl-7.27.0/configure	2012-07-27 18:25:28.000000000 +0000
+++ curl-7.27.0-32/configure	2013-01-12 01:57:26.205509796 +0000
@@ -1,13 +1,15 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.64 for curl -.
+# Generated by GNU Autoconf 2.68 for curl -.
 #
 # Report bugs to <a suitable curl mailing list: http://curl.haxx.se/mail/>.
 #
+#
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
-# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software
+# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
 # Foundation, Inc.
 #
+#
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
 #
@@ -78,7 +80,7 @@
 
   if test -z "$curl_cv_PATH_SEPARATOR"; then
     if test -z "$PATH"; then
-      as_fn_error "PATH not set. Cannot continue without PATH being set."
+      as_fn_error $? "PATH not set. Cannot continue without PATH being set."
     fi
         tst_dirs_col=0
     tst_save_IFS=$IFS; IFS=':'
@@ -96,7 +98,7 @@
     IFS=$tst_save_IFS
     if test $tst_dirs_sem -eq $tst_dirs_col; then
                   if test -z "$PATH_SEPARATOR"; then
-                as_fn_error "PATH_SEPARATOR not set. Cannot continue without it."
+                as_fn_error $? "PATH_SEPARATOR not set. Cannot continue without it."
       fi
     else
             if test $tst_dirs_sem -gt $tst_dirs_col; then
@@ -123,6 +125,7 @@
 IFS=" ""	$as_nl"
 
 # Find who we are.  Look in the path if we contain no directory separator.
+as_myself=
 case $0 in #((
   *[\\/]* ) as_myself=$0 ;;
   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -256,11 +259,18 @@
   # We cannot yet assume a decent shell, so we have to provide a
 	# neutralization value for shells without unset; and this also
 	# works around shells that cannot unset nonexistent variables.
+	# Preserve -v and -x to the replacement shell.
 	BASH_ENV=/dev/null
 	ENV=/dev/null
 	(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
 	export CONFIG_SHELL
-	exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
+	case $- in # ((((
+	  *v*x* | *x*v* ) as_opts=-vx ;;
+	  *v* ) as_opts=-v ;;
+	  *x* ) as_opts=-x ;;
+	  * ) as_opts= ;;
+	esac
+	exec "$CONFIG_SHELL" $as_opts "$as_myself" ${1+"$@"}
 fi
 
     if test x$as_have_required = xno; then :
@@ -359,7 +369,7 @@
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
@@ -399,19 +409,19 @@
 fi # as_fn_arith
 
 
-# as_fn_error ERROR [LINENO LOG_FD]
-# ---------------------------------
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with status $?, using 1 if that was 0.
+# script with STATUS, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$?; test $as_status -eq 0 && as_status=1
-  if test "$3"; then
-    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $1" >&2
+  $as_echo "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
@@ -571,10 +581,11 @@
 SHELL=${CONFIG_SHELL-/bin/sh}
 
 
-exec 7<&0 </dev/null 6>&1
+test -n "$DJDIR" || exec 7<&0 </dev/null
+exec 6>&1
 
 # Name of the host.
-# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
 # so uname gets run too.
 ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
 
@@ -992,8 +1003,9 @@
   fi
 
   case $ac_option in
-  *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
-  *)	ac_optarg=yes ;;
+  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
+  *=)   ac_optarg= ;;
+  *)    ac_optarg=yes ;;
   esac
 
   # Accept the important Cygnus configure options, so we can diagnose typos.
@@ -1038,7 +1050,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1064,7 +1076,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1268,7 +1280,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1284,7 +1296,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1314,8 +1326,8 @@
   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
     x_libraries=$ac_optarg ;;
 
-  -*) as_fn_error "unrecognized option: \`$ac_option'
-Try \`$0 --help' for more information."
+  -*) as_fn_error $? "unrecognized option: \`$ac_option'
+Try \`$0 --help' for more information"
     ;;
 
   *=*)
@@ -1323,7 +1335,7 @@
     # Reject names that are not valid shell variable names.
     case $ac_envvar in #(
       '' | [0-9]* | *[!_$as_cr_alnum]* )
-      as_fn_error "invalid variable name: \`$ac_envvar'" ;;
+      as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
     esac
     eval $ac_envvar=\$ac_optarg
     export $ac_envvar ;;
@@ -1333,7 +1345,7 @@
     $as_echo "$as_me: WARNING: you should use --build, --host, --target" >&2
     expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
       $as_echo "$as_me: WARNING: invalid host type: $ac_option" >&2
-    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
+    : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
     ;;
 
   esac
@@ -1341,13 +1353,13 @@
 
 if test -n "$ac_prev"; then
   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
-  as_fn_error "missing argument to $ac_option"
+  as_fn_error $? "missing argument to $ac_option"
 fi
 
 if test -n "$ac_unrecognized_opts"; then
   case $enable_option_checking in
     no) ;;
-    fatal) as_fn_error "unrecognized options: $ac_unrecognized_opts" ;;
+    fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
     *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
   esac
 fi
@@ -1370,7 +1382,7 @@
     [\\/$]* | ?:[\\/]* )  continue;;
     NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
   esac
-  as_fn_error "expected an absolute directory name for --$ac_var: $ac_val"
+  as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
 done
 
 # There might be people who depend on the old broken behavior: `$host'
@@ -1384,8 +1396,8 @@
 if test "x$host_alias" != x; then
   if test "x$build_alias" = x; then
     cross_compiling=maybe
-    $as_echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
-    If a cross compiler is detected then cross compile mode will be used." >&2
+    $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used" >&2
   elif test "x$build_alias" != "x$host_alias"; then
     cross_compiling=yes
   fi
@@ -1400,9 +1412,9 @@
 ac_pwd=`pwd` && test -n "$ac_pwd" &&
 ac_ls_di=`ls -di .` &&
 ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
-  as_fn_error "working directory cannot be determined"
+  as_fn_error $? "working directory cannot be determined"
 test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
-  as_fn_error "pwd does not report name of working directory"
+  as_fn_error $? "pwd does not report name of working directory"
 
 
 # Find the source files, if location was not specified.
@@ -1441,11 +1453,11 @@
 fi
 if test ! -r "$srcdir/$ac_unique_file"; then
   test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
-  as_fn_error "cannot find sources ($ac_unique_file) in $srcdir"
+  as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
 fi
 ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
 ac_abs_confdir=`(
-	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error "$ac_msg"
+	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
 	pwd)`
 # When building in place, set srcdir=.
 if test "$ac_abs_confdir" = "$ac_pwd"; then
@@ -1485,7 +1497,7 @@
       --help=short        display options specific to this package
       --help=recursive    display the short help of all the included packages
   -V, --version           display version information and exit
-  -q, --quiet, --silent   do not print \`checking...' messages
+  -q, --quiet, --silent   do not print \`checking ...' messages
       --cache-file=FILE   cache test results in FILE [disabled]
   -C, --config-cache      alias for \`--cache-file=config.cache'
   -n, --no-create         do not create output files
@@ -1717,7 +1729,7 @@
   LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
               nonstandard directory <lib dir>
   LIBS        libraries to pass to the linker, e.g. -l<library>
-  CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
+  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
               you have headers in a nonstandard directory <include dir>
   CPP         C preprocessor
 
@@ -1788,9 +1800,9 @@
 if $ac_init_version; then
   cat <<\_ACEOF
 curl configure -
-generated by GNU Autoconf 2.64
+generated by GNU Autoconf 2.68
 
-Copyright (C) 2009 Free Software Foundation, Inc.
+Copyright (C) 2010 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 
@@ -1838,8 +1850,8 @@
 
 	ac_retval=1
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
-  return $ac_retval
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_compile
 
@@ -1852,7 +1864,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -1870,7 +1882,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_header_compile
 
@@ -1911,8 +1923,8 @@
        ac_retval=$ac_status
 fi
   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
-  return $ac_retval
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_run
 
@@ -2083,8 +2095,8 @@
 rm -f conftest.val
 
   fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
-  return $ac_retval
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
 
 } # ac_fn_c_compute_int
 
@@ -2109,7 +2121,7 @@
     mv -f conftest.er1 conftest.err
   fi
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } >/dev/null && {
+  test $ac_status = 0; } > conftest.i && {
 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
 	 test ! -s conftest.err
        }; then :
@@ -2120,8 +2132,8 @@
 
     ac_retval=1
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
-  return $ac_retval
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_cpp
 
@@ -2166,8 +2178,8 @@
   # interfere with the next link command; also delete a directory that is
   # left behind by Apple's compiler.  We do this before executing the actions.
   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
-  return $ac_retval
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_link
 
@@ -2179,7 +2191,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -2218,7 +2230,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_func
 
@@ -2230,10 +2242,10 @@
 ac_fn_c_check_header_mongrel ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+  if eval \${$3+:} false; then :
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 fi
 eval ac_res=\$$3
@@ -2269,7 +2281,7 @@
 else
   ac_header_preproc=no
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
 $as_echo "$ac_header_preproc" >&6; }
 
@@ -2292,17 +2304,15 @@
 $as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
 $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
-( cat <<\_ASBOX
-## ---------------------------------------------------------------------- ##
+( $as_echo "## ---------------------------------------------------------------------- ##
 ## Report this to a suitable curl mailing list: http://curl.haxx.se/mail/ ##
-## ---------------------------------------------------------------------- ##
-_ASBOX
+## ---------------------------------------------------------------------- ##"
      ) | sed "s/^/$as_me: WARNING:     /" >&2
     ;;
 esac
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=\$ac_header_compiler"
@@ -2311,7 +2321,7 @@
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_header_mongrel
 
@@ -2324,7 +2334,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=no"
@@ -2363,7 +2373,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_type
 cat >config.log <<_ACEOF
@@ -2371,7 +2381,7 @@
 running configure, to aid debugging if configure makes a mistake.
 
 It was created by curl $as_me -, which was
-generated by GNU Autoconf 2.64.  Invocation command line was
+generated by GNU Autoconf 2.68.  Invocation command line was
 
   $ $0 $@
 
@@ -2481,11 +2491,9 @@
   {
     echo
 
-    cat <<\_ASBOX
-## ---------------- ##
+    $as_echo "## ---------------- ##
 ## Cache variables. ##
-## ---------------- ##
-_ASBOX
+## ---------------- ##"
     echo
     # The following way of writing the cache mishandles newlines in values,
 (
@@ -2519,11 +2527,9 @@
 )
     echo
 
-    cat <<\_ASBOX
-## ----------------- ##
+    $as_echo "## ----------------- ##
 ## Output variables. ##
-## ----------------- ##
-_ASBOX
+## ----------------- ##"
     echo
     for ac_var in $ac_subst_vars
     do
@@ -2536,11 +2542,9 @@
     echo
 
     if test -n "$ac_subst_files"; then
-      cat <<\_ASBOX
-## ------------------- ##
+      $as_echo "## ------------------- ##
 ## File substitutions. ##
-## ------------------- ##
-_ASBOX
+## ------------------- ##"
       echo
       for ac_var in $ac_subst_files
       do
@@ -2554,11 +2558,9 @@
     fi
 
     if test -s confdefs.h; then
-      cat <<\_ASBOX
-## ----------- ##
+      $as_echo "## ----------- ##
 ## confdefs.h. ##
-## ----------- ##
-_ASBOX
+## ----------- ##"
       echo
       cat confdefs.h
       echo
@@ -2613,7 +2615,12 @@
 ac_site_file1=NONE
 ac_site_file2=NONE
 if test -n "$CONFIG_SITE"; then
-  ac_site_file1=$CONFIG_SITE
+  # We do not want a PATH search for config.site.
+  case $CONFIG_SITE in #((
+    -*)  ac_site_file1=./$CONFIG_SITE;;
+    */*) ac_site_file1=$CONFIG_SITE;;
+    *)   ac_site_file1=./$CONFIG_SITE;;
+  esac
 elif test "x$prefix" != xNONE; then
   ac_site_file1=$prefix/share/config.site
   ac_site_file2=$prefix/etc/config.site
@@ -2624,18 +2631,22 @@
 for ac_site_file in "$ac_site_file1" "$ac_site_file2"
 do
   test "x$ac_site_file" = xNONE && continue
-  if test -r "$ac_site_file"; then
+  if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
 $as_echo "$as_me: loading site script $ac_site_file" >&6;}
     sed 's/^/| /' "$ac_site_file" >&5
-    . "$ac_site_file"
+    . "$ac_site_file" \
+      || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "failed to load site script $ac_site_file
+See \`config.log' for more details" "$LINENO" 5; }
   fi
 done
 
 if test -r "$cache_file"; then
-  # Some versions of bash will fail to source /dev/null (special
-  # files actually), so we avoid doing that.
-  if test -f "$cache_file"; then
+  # Some versions of bash will fail to source /dev/null (special files
+  # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
+  if test /dev/null != "$cache_file" && test -f "$cache_file"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
 $as_echo "$as_me: loading cache $cache_file" >&6;}
     case $cache_file in
@@ -2704,7 +2715,7 @@
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
   { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
 $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
-  as_fn_error "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
+  as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
 fi
 ## -------------------- ##
 ## Main body of script. ##
@@ -2969,7 +2980,7 @@
 set dummy sed; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_SED+set}" = set; then :
+if ${ac_cv_path_SED+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $SED in
@@ -3008,7 +3019,7 @@
 
 
   if test -z "$SED" || test "$SED" = "not_found"; then
-    as_fn_error "sed not found in PATH. Cannot continue without sed." "$LINENO" 5
+    as_fn_error $? "sed not found in PATH. Cannot continue without sed." "$LINENO" 5
   fi
 fi
 
@@ -3018,7 +3029,7 @@
 set dummy grep; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_GREP+set}" = set; then :
+if ${ac_cv_path_GREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $GREP in
@@ -3057,7 +3068,7 @@
 
 
   if test -z "$GREP" || test "$GREP" = "not_found"; then
-    as_fn_error "grep not found in PATH. Cannot continue without grep." "$LINENO" 5
+    as_fn_error $? "grep not found in PATH. Cannot continue without grep." "$LINENO" 5
   fi
 fi
 
@@ -3074,7 +3085,7 @@
 set dummy egrep; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_EGREP+set}" = set; then :
+if ${ac_cv_path_EGREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $EGREP in
@@ -3115,7 +3126,7 @@
   fi
 fi
 if test -z "$EGREP" || test "$EGREP" = "not_found"; then
-  as_fn_error "egrep not found in PATH. Cannot continue without egrep." "$LINENO" 5
+  as_fn_error $? "egrep not found in PATH. Cannot continue without egrep." "$LINENO" 5
 fi
 
 
@@ -3125,7 +3136,7 @@
 set dummy ${ac_tool_prefix}ar; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_AR+set}" = set; then :
+if ${ac_cv_path_AR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $AR in
@@ -3169,7 +3180,7 @@
 set dummy ar; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_ac_pt_AR+set}" = set; then :
+if ${ac_cv_path_ac_pt_AR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $ac_pt_AR in
@@ -3221,7 +3232,7 @@
 fi
 
   if test -z "$AR" || test "$AR" = "not_found"; then
-    as_fn_error "ar not found in PATH. Cannot continue without ar." "$LINENO" 5
+    as_fn_error $? "ar not found in PATH. Cannot continue without ar." "$LINENO" 5
   fi
 fi
 
@@ -3236,16 +3247,22 @@
 am__api_version="1.9"
 ac_aux_dir=
 for ac_dir in "$srcdir" "$srcdir/.." "$srcdir/../.."; do
-  for ac_t in install-sh install.sh shtool; do
-    if test -f "$ac_dir/$ac_t"; then
-      ac_aux_dir=$ac_dir
-      ac_install_sh="$ac_aux_dir/$ac_t -c"
-      break 2
-    fi
-  done
+  if test -f "$ac_dir/install-sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install-sh -c"
+    break
+  elif test -f "$ac_dir/install.sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install.sh -c"
+    break
+  elif test -f "$ac_dir/shtool"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/shtool install -c"
+    break
+  fi
 done
 if test -z "$ac_aux_dir"; then
-  as_fn_error "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
+  as_fn_error $? "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
 fi
 
 # These three variables are undocumented and unsupported,
@@ -3274,7 +3291,7 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
 $as_echo_n "checking for a BSD-compatible install... " >&6; }
 if test -z "$INSTALL"; then
-if test "${ac_cv_path_install+set}" = set; then :
+if ${ac_cv_path_install+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -3374,7 +3391,7 @@
       # if, for instance, CONFIG_SHELL is bash and it inherits a
       # broken ls alias from the environment.  This has actually
       # happened.  Such a system could not be considered "sane".
-      as_fn_error "ls -t appears to fail.  Make sure there is not a broken
+      as_fn_error $? "ls -t appears to fail.  Make sure there is not a broken
 alias in your environment" "$LINENO" 5
    fi
 
@@ -3384,7 +3401,7 @@
    # Ok.
    :
 else
-   as_fn_error "newly created file is older than distributed files!
+   as_fn_error $? "newly created file is older than distributed files!
 Check your system clock" "$LINENO" 5
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
@@ -3451,7 +3468,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_AWK+set}" = set; then :
+if ${ac_cv_prog_AWK+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$AWK"; then
@@ -3491,7 +3508,7 @@
 $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
 set x ${MAKE-make}
 ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
-if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_prog_make_${ac_make}_set+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat >conftest.make <<\_ACEOF
@@ -3499,7 +3516,7 @@
 all:
 	@echo '@@@%%%=$(MAKE)=@@@%%%'
 _ACEOF
-# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
+# GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
 case `${MAKE-make} -f conftest.make 2>/dev/null` in
   *@@@%%%=?*=@@@%%%*)
     eval ac_cv_prog_make_${ac_make}_set=yes;;
@@ -3530,7 +3547,7 @@
 # test to see if srcdir already configured
 if test "`cd $srcdir && pwd`" != "`pwd`" &&
    test -f $srcdir/config.status; then
-  as_fn_error "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
+  as_fn_error $? "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
 fi
 
 # test whether we have cygpath
@@ -3585,7 +3602,7 @@
 set dummy ${ac_tool_prefix}strip; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_STRIP+set}" = set; then :
+if ${ac_cv_prog_STRIP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$STRIP"; then
@@ -3625,7 +3642,7 @@
 set dummy strip; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then :
+if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_STRIP"; then
@@ -3731,27 +3748,27 @@
 
 # Make sure we can run config.sub.
 $SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
-  as_fn_error "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
+  as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
 $as_echo_n "checking build system type... " >&6; }
-if test "${ac_cv_build+set}" = set; then :
+if ${ac_cv_build+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_build_alias=$build_alias
 test "x$ac_build_alias" = x &&
   ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
 test "x$ac_build_alias" = x &&
-  as_fn_error "cannot guess build type; you must specify one" "$LINENO" 5
+  as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
 ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
-  as_fn_error "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
+  as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
 $as_echo "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical build" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
 esac
 build=$ac_cv_build
 ac_save_IFS=$IFS; IFS='-'
@@ -3769,14 +3786,14 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
 $as_echo_n "checking host system type... " >&6; }
-if test "${ac_cv_host+set}" = set; then :
+if ${ac_cv_host+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "x$host_alias" = x; then
   ac_cv_host=$ac_cv_build
 else
   ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
-    as_fn_error "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
+    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
 fi
 
 fi
@@ -3784,7 +3801,7 @@
 $as_echo "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical host" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
 esac
 host=$ac_cv_host
 ac_save_IFS=$IFS; IFS='-'
@@ -3884,7 +3901,7 @@
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -3924,7 +3941,7 @@
 set dummy gcc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_CC"; then
@@ -3977,7 +3994,7 @@
 set dummy ${ac_tool_prefix}cc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -4017,7 +4034,7 @@
 set dummy cc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -4076,7 +4093,7 @@
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -4120,7 +4137,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_CC"; then
@@ -4174,8 +4191,8 @@
 
 test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "no acceptable C compiler found in \$PATH
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "no acceptable C compiler found in \$PATH
+See \`config.log' for more details" "$LINENO" 5; }
 
 # Provide some information about the compiler.
 $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
@@ -4196,31 +4213,29 @@
 ... rest of stderr output deleted ...
          10q' conftest.err >conftest.er1
     cat conftest.er1 >&5
-    rm -f conftest.er1 conftest.err
   fi
+  rm -f conftest.er1 conftest.err
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }
 done
 
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#include <stdio.h>
+
 int main (void)
 {
-FILE *f = fopen ("conftest.out", "w");
- return ferror (f) || fclose (f) != 0;
 
  ;
  return 0;
 }
 _ACEOF
 ac_clean_files_save=$ac_clean_files
-ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out conftest.out"
+ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out"
 # Try to create an executable without -o first, disregard a.out.
 # It will help us diagnose broken compilers, and finding out an intuition
 # of exeext.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
-$as_echo_n "checking for C compiler default output file name... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
+$as_echo_n "checking whether the C compiler works... " >&6; }
 ac_link_default=`$as_echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
 
 # The possible output files:
@@ -4282,62 +4297,28 @@
 else
   ac_file=''
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
-$as_echo "$ac_file" >&6; }
 if test -z "$ac_file"; then :
-  $as_echo "$as_me: failed program was:" >&5
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+$as_echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "C compiler cannot create executables
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "C compiler cannot create executables
+See \`config.log' for more details" "$LINENO" 5; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+$as_echo "yes" >&6; }
 fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
+$as_echo_n "checking for C compiler default output file name... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
+$as_echo "$ac_file" >&6; }
 ac_exeext=$ac_cv_exeext
 
-# Check that the compiler produces executables we can run.  If not, either
-# the compiler is broken, or we cross compile.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
-$as_echo_n "checking whether the C compiler works... " >&6; }
-# If not cross compiling, check that we can run a simple program.
-if test "$cross_compiling" != yes; then
-  if { ac_try='./$ac_file'
-  { { case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_try") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; }; then
-    cross_compiling=no
-  else
-    if test "$cross_compiling" = maybe; then
-	cross_compiling=yes
-    else
-	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run C compiled programs.
-If you meant to cross compile, use \`--host'.
-See \`config.log' for more details." "$LINENO" 5; }
-    fi
-  fi
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-
-rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out conftest.out
+rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
 ac_clean_files=$ac_clean_files_save
-# Check that the compiler produces executables we can run.  If not, either
-# the compiler is broken, or we cross compile.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
-$as_echo_n "checking whether we are cross compiling... " >&6; }
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
-$as_echo "$cross_compiling" >&6; }
-
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
 $as_echo_n "checking for suffix of executables... " >&6; }
 if { { ac_try="$ac_link"
@@ -4367,19 +4348,77 @@
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details" "$LINENO" 5; }
 fi
-rm -f conftest$ac_cv_exeext
+rm -f conftest conftest$ac_cv_exeext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
 $as_echo "$ac_cv_exeext" >&6; }
 
 rm -f conftest.$ac_ext
 EXEEXT=$ac_cv_exeext
 ac_exeext=$EXEEXT
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <stdio.h>
+int main (void)
+{
+FILE *f = fopen ("conftest.out", "w");
+ return ferror (f) || fclose (f) != 0;
+
+ ;
+ return 0;
+}
+_ACEOF
+ac_clean_files="$ac_clean_files conftest.out"
+# Check that the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
+$as_echo_n "checking whether we are cross compiling... " >&6; }
+if test "$cross_compiling" != yes; then
+  { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+  if { ac_try='./conftest$ac_cv_exeext'
+  { { case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+$as_echo "$ac_try_echo"; } >&5
+  (eval "$ac_try") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; }; then
+    cross_compiling=no
+  else
+    if test "$cross_compiling" = maybe; then
+	cross_compiling=yes
+    else
+	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "cannot run C compiled programs.
+If you meant to cross compile, use \`--host'.
+See \`config.log' for more details" "$LINENO" 5; }
+    fi
+  fi
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
+$as_echo "$cross_compiling" >&6; }
+
+rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
+ac_clean_files=$ac_clean_files_save
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
 $as_echo_n "checking for suffix of object files... " >&6; }
-if test "${ac_cv_objext+set}" = set; then :
+if ${ac_cv_objext+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -4418,8 +4457,8 @@
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot compute suffix of object files: cannot compile
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot compute suffix of object files: cannot compile
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
@@ -4429,7 +4468,7 @@
 ac_objext=$OBJEXT
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
 $as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
-if test "${ac_cv_c_compiler_gnu+set}" = set; then :
+if ${ac_cv_c_compiler_gnu+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -4465,7 +4504,7 @@
 ac_save_CFLAGS=$CFLAGS
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
 $as_echo_n "checking whether $CC accepts -g... " >&6; }
-if test "${ac_cv_prog_cc_g+set}" = set; then :
+if ${ac_cv_prog_cc_g+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_save_c_werror_flag=$ac_c_werror_flag
@@ -4540,7 +4579,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
 $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
-if test "${ac_cv_prog_cc_c89+set}" = set; then :
+if ${ac_cv_prog_cc_c89+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_prog_cc_c89=no
@@ -4638,7 +4677,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
 $as_echo_n "checking dependency style of $depcc... " >&6; }
-if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then :
+if ${am_cv_CC_dependencies_compiler_type+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
@@ -4771,8 +4810,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_inttypes
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -4794,7 +4832,7 @@
   CPP=
 fi
 if test -z "$CPP"; then
-  if test "${ac_cv_prog_CPP+set}" = set; then :
+  if ${ac_cv_prog_CPP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
       # Double quotes because CPP needs to be expanded
@@ -4824,7 +4862,7 @@
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
@@ -4840,11 +4878,11 @@
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
   break
 fi
@@ -4883,7 +4921,7 @@
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
@@ -4899,18 +4937,18 @@
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
 
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 
 ac_ext=c
@@ -4922,7 +4960,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
 $as_echo_n "checking for grep that handles long lines and -e... " >&6; }
-if test "${ac_cv_path_GREP+set}" = set; then :
+if ${ac_cv_path_GREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -z "$GREP"; then
@@ -4971,7 +5009,7 @@
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_GREP"; then
-    as_fn_error "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_GREP=$GREP
@@ -4985,7 +5023,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
 $as_echo_n "checking for egrep... " >&6; }
-if test "${ac_cv_path_EGREP+set}" = set; then :
+if ${ac_cv_path_EGREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
@@ -5037,7 +5075,7 @@
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_EGREP"; then
-    as_fn_error "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_EGREP=$EGREP
@@ -5052,7 +5090,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
 $as_echo_n "checking for ANSI C header files... " >&6; }
-if test "${ac_cv_header_stdc+set}" = set; then :
+if ${ac_cv_header_stdc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -5168,8 +5206,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -5183,7 +5220,7 @@
     #
         #
   if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   #
   # The cast to long int works around a bug in the HP C Compiler
@@ -5192,7 +5229,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
 $as_echo_n "checking size of long... " >&6; }
-if test "${ac_cv_sizeof_long+set}" = set; then :
+if ${ac_cv_sizeof_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :
@@ -5201,9 +5238,8 @@
   if test "$ac_cv_type_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_long=0
    fi
@@ -5226,7 +5262,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of void*" >&5
 $as_echo_n "checking size of void*... " >&6; }
-if test "${ac_cv_sizeof_voidp+set}" = set; then :
+if ${ac_cv_sizeof_voidp+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (void*))" "ac_cv_sizeof_voidp"        "$ac_includes_default"; then :
@@ -5235,9 +5271,8 @@
   if test "$ac_cv_type_voidp" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (void*)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (void*)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_voidp=0
    fi
@@ -5257,11 +5292,11 @@
   #
   if test -z "$ac_cv_sizeof_long" ||
     test "$ac_cv_sizeof_long" -eq "0"; then
-    as_fn_error "cannot find out size of long." "$LINENO" 5
+    as_fn_error $? "cannot find out size of long." "$LINENO" 5
   fi
   if test -z "$ac_cv_sizeof_voidp" ||
      test "$ac_cv_sizeof_voidp" -eq "0"; then
-    as_fn_error "cannot find out size of void*." "$LINENO" 5
+    as_fn_error $? "cannot find out size of void*." "$LINENO" 5
   fi
   #
   x_LP64_long=""
@@ -5346,10 +5381,10 @@
   as_ac_HaveDef=`$as_echo "curl_cv_have_def_$tmp_fmt" | $as_tr_sh`
   as_ac_Def=`$as_echo "curl_cv_def_$tmp_fmt" | $as_tr_sh`
   if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -5374,7 +5409,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     eval "$as_ac_HaveDef=no"
 
@@ -5460,10 +5495,10 @@
   as_ac_HaveDef=`$as_echo "curl_cv_have_def_$tmp_fmt" | $as_tr_sh`
   as_ac_Def=`$as_echo "curl_cv_def_$tmp_fmt" | $as_tr_sh`
   if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -5488,7 +5523,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     eval "$as_ac_HaveDef=no"
 
@@ -5574,10 +5609,10 @@
   as_ac_HaveDef=`$as_echo "curl_cv_have_def_$tmp_fmt" | $as_tr_sh`
   as_ac_Def=`$as_echo "curl_cv_def_$tmp_fmt" | $as_tr_sh`
   if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -5602,7 +5637,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     eval "$as_ac_HaveDef=no"
 
@@ -5630,7 +5665,7 @@
 $as_echo "$curl_typeof_curl_off_t" >&6; }
   fi
   if test "$curl_typeof_curl_off_t" = "unknown"; then
-    as_fn_error "cannot find data type for curl_off_t." "$LINENO" 5
+    as_fn_error $? "cannot find data type for curl_off_t." "$LINENO" 5
   fi
   #
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of curl_off_t" >&5
@@ -5674,7 +5709,7 @@
         curl_format_curl_off_tu="I16u"
         ;;
       *)
-        as_fn_error "cannot find print format string for curl_off_t." "$LINENO" 5
+        as_fn_error $? "cannot find print format string for curl_off_t." "$LINENO" 5
         ;;
     esac
   fi
@@ -5713,7 +5748,7 @@
       tst_suffixes="L:i16::"
       ;;
     *)
-      as_fn_error "unexpected data type $curl_typeof_curl_off_t" "$LINENO" 5
+      as_fn_error $? "unexpected data type $curl_typeof_curl_off_t" "$LINENO" 5
       ;;
   esac
   #
@@ -5766,7 +5801,7 @@
   IFS=$old_IFS
   #
   if test "x$curl_suffix_curl_off_t" = "xunknown"; then
-    as_fn_error "cannot find constant suffix string for curl_off_t." "$LINENO" 5
+    as_fn_error $? "cannot find constant suffix string for curl_off_t." "$LINENO" 5
   else
     { $as_echo "$as_me:${as_lineno-$LINENO}: result: $curl_suffix_curl_off_t" >&5
 $as_echo "$curl_suffix_curl_off_t" >&6; }
@@ -6856,7 +6891,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for special C compiler options needed for large files" >&5
 $as_echo_n "checking for special C compiler options needed for large files... " >&6; }
-if test "${ac_cv_sys_largefile_CC+set}" = set; then :
+if ${ac_cv_sys_largefile_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_sys_largefile_CC=no
@@ -6906,7 +6941,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _FILE_OFFSET_BITS value needed for large files" >&5
 $as_echo_n "checking for _FILE_OFFSET_BITS value needed for large files... " >&6; }
-if test "${ac_cv_sys_file_offset_bits+set}" = set; then :
+if ${ac_cv_sys_file_offset_bits+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   while :; do
@@ -6973,7 +7008,7 @@
   if test $ac_cv_sys_file_offset_bits = unknown; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _LARGE_FILES value needed for large files" >&5
 $as_echo_n "checking for _LARGE_FILES value needed for large files... " >&6; }
-if test "${ac_cv_sys_large_files+set}" = set; then :
+if ${ac_cv_sys_large_files+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   while :; do
@@ -7050,7 +7085,7 @@
 set dummy ${ac_tool_prefix}as; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_AS+set}" = set; then :
+if ${ac_cv_prog_AS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$AS"; then
@@ -7090,7 +7125,7 @@
 set dummy as; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_AS+set}" = set; then :
+if ${ac_cv_prog_ac_ct_AS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_AS"; then
@@ -7142,7 +7177,7 @@
 set dummy ${ac_tool_prefix}dlltool; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_DLLTOOL+set}" = set; then :
+if ${ac_cv_prog_DLLTOOL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$DLLTOOL"; then
@@ -7182,7 +7217,7 @@
 set dummy dlltool; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_DLLTOOL+set}" = set; then :
+if ${ac_cv_prog_ac_ct_DLLTOOL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_DLLTOOL"; then
@@ -7234,7 +7269,7 @@
 set dummy ${ac_tool_prefix}objdump; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_OBJDUMP+set}" = set; then :
+if ${ac_cv_prog_OBJDUMP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$OBJDUMP"; then
@@ -7274,7 +7309,7 @@
 set dummy objdump; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then :
+if ${ac_cv_prog_ac_ct_OBJDUMP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_OBJDUMP"; then
@@ -7469,7 +7504,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a sed that does not truncate output" >&5
 $as_echo_n "checking for a sed that does not truncate output... " >&6; }
-if test "${ac_cv_path_SED+set}" = set; then :
+if ${ac_cv_path_SED+:} false; then :
   $as_echo_n "(cached) " >&6
 else
             ac_script=s/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb/
@@ -7524,7 +7559,7 @@
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_SED"; then
-    as_fn_error "no acceptable sed could be found in \$PATH" "$LINENO" 5
+    as_fn_error $? "no acceptable sed could be found in \$PATH" "$LINENO" 5
   fi
 else
   ac_cv_path_SED=$SED
@@ -7551,7 +7586,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for fgrep" >&5
 $as_echo_n "checking for fgrep... " >&6; }
-if test "${ac_cv_path_FGREP+set}" = set; then :
+if ${ac_cv_path_FGREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if echo 'ab*c' | $GREP -F 'ab*c' >/dev/null 2>&1
@@ -7603,7 +7638,7 @@
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_FGREP"; then
-    as_fn_error "no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_FGREP=$FGREP
@@ -7682,7 +7717,7 @@
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
 $as_echo_n "checking for non-GNU ld... " >&6; }
 fi
-if test "${lt_cv_path_LD+set}" = set; then :
+if ${lt_cv_path_LD+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -z "$LD"; then
@@ -7719,10 +7754,10 @@
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
 fi
-test -z "$LD" && as_fn_error "no acceptable ld found in \$PATH" "$LINENO" 5
+test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
 $as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
-if test "${lt_cv_prog_gnu_ld+set}" = set; then :
+if ${lt_cv_prog_gnu_ld+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   # I'd rather use --version here, but apparently some GNU lds only accept -v.
@@ -7749,7 +7784,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for BSD- or MS-compatible name lister (nm)" >&5
 $as_echo_n "checking for BSD- or MS-compatible name lister (nm)... " >&6; }
-if test "${lt_cv_path_NM+set}" = set; then :
+if ${lt_cv_path_NM+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$NM"; then
@@ -7812,7 +7847,7 @@
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_DUMPBIN+set}" = set; then :
+if ${ac_cv_prog_DUMPBIN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$DUMPBIN"; then
@@ -7856,7 +7891,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_DUMPBIN+set}" = set; then :
+if ${ac_cv_prog_ac_ct_DUMPBIN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_DUMPBIN"; then
@@ -7928,7 +7963,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking the name lister ($NM) interface" >&5
 $as_echo_n "checking the name lister ($NM) interface... " >&6; }
-if test "${lt_cv_nm_interface+set}" = set; then :
+if ${lt_cv_nm_interface+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_nm_interface="BSD nm"
@@ -7963,7 +7998,7 @@
 # find the maximum length of command line arguments
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking the maximum length of command line arguments" >&5
 $as_echo_n "checking the maximum length of command line arguments... " >&6; }
-if test "${lt_cv_sys_max_cmd_len+set}" = set; then :
+if ${lt_cv_sys_max_cmd_len+:} false; then :
   $as_echo_n "(cached) " >&6
 else
     i=0
@@ -8165,7 +8200,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to convert $build file names to $host format" >&5
 $as_echo_n "checking how to convert $build file names to $host format... " >&6; }
-if test "${lt_cv_to_host_file_cmd+set}" = set; then :
+if ${lt_cv_to_host_file_cmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $host in
@@ -8212,7 +8247,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to convert $build file names to toolchain format" >&5
 $as_echo_n "checking how to convert $build file names to toolchain format... " >&6; }
-if test "${lt_cv_to_tool_file_cmd+set}" = set; then :
+if ${lt_cv_to_tool_file_cmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   #assume ordinary cross tools, or native build.
@@ -8239,7 +8274,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $LD option to reload object files" >&5
 $as_echo_n "checking for $LD option to reload object files... " >&6; }
-if test "${lt_cv_ld_reload_flag+set}" = set; then :
+if ${lt_cv_ld_reload_flag+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_ld_reload_flag='-r'
@@ -8280,7 +8315,7 @@
 set dummy ${ac_tool_prefix}objdump; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_OBJDUMP+set}" = set; then :
+if ${ac_cv_prog_OBJDUMP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$OBJDUMP"; then
@@ -8320,7 +8355,7 @@
 set dummy objdump; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then :
+if ${ac_cv_prog_ac_ct_OBJDUMP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_OBJDUMP"; then
@@ -8376,7 +8411,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to recognize dependent libraries" >&5
 $as_echo_n "checking how to recognize dependent libraries... " >&6; }
-if test "${lt_cv_deplibs_check_method+set}" = set; then :
+if ${lt_cv_deplibs_check_method+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_file_magic_cmd='$MAGIC_CMD'
@@ -8619,7 +8654,7 @@
 set dummy ${ac_tool_prefix}dlltool; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_DLLTOOL+set}" = set; then :
+if ${ac_cv_prog_DLLTOOL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$DLLTOOL"; then
@@ -8659,7 +8694,7 @@
 set dummy dlltool; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_DLLTOOL+set}" = set; then :
+if ${ac_cv_prog_ac_ct_DLLTOOL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_DLLTOOL"; then
@@ -8716,7 +8751,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to associate runtime and link libraries" >&5
 $as_echo_n "checking how to associate runtime and link libraries... " >&6; }
-if test "${lt_cv_sharedlib_from_linklib_cmd+set}" = set; then :
+if ${lt_cv_sharedlib_from_linklib_cmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_sharedlib_from_linklib_cmd='unknown'
@@ -8759,7 +8794,7 @@
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_AR+set}" = set; then :
+if ${ac_cv_prog_AR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$AR"; then
@@ -8803,7 +8838,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_AR+set}" = set; then :
+if ${ac_cv_prog_ac_ct_AR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_AR"; then
@@ -8867,7 +8902,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for archiver @FILE support" >&5
 $as_echo_n "checking for archiver @FILE support... " >&6; }
-if test "${lt_cv_ar_at_file+set}" = set; then :
+if ${lt_cv_ar_at_file+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_ar_at_file=no
@@ -8927,7 +8962,7 @@
 set dummy ${ac_tool_prefix}strip; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_STRIP+set}" = set; then :
+if ${ac_cv_prog_STRIP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$STRIP"; then
@@ -8967,7 +9002,7 @@
 set dummy strip; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then :
+if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_STRIP"; then
@@ -9026,7 +9061,7 @@
 set dummy ${ac_tool_prefix}ranlib; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_RANLIB+set}" = set; then :
+if ${ac_cv_prog_RANLIB+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$RANLIB"; then
@@ -9066,7 +9101,7 @@
 set dummy ranlib; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then :
+if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_RANLIB"; then
@@ -9195,7 +9230,7 @@
 # Check for command to grab the raw symbol name followed by C symbol from nm.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking command to parse $NM output from $compiler object" >&5
 $as_echo_n "checking command to parse $NM output from $compiler object... " >&6; }
-if test "${lt_cv_sys_global_symbol_pipe+set}" = set; then :
+if ${lt_cv_sys_global_symbol_pipe+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9493,7 +9528,7 @@
  *)
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${with_sysroot}" >&5
 $as_echo "${with_sysroot}" >&6; }
-   as_fn_error "The sysroot must be an absolute path." "$LINENO" 5
+   as_fn_error $? "The sysroot must be an absolute path." "$LINENO" 5
    ;;
 esac
 
@@ -9629,7 +9664,7 @@
   CFLAGS="$CFLAGS -belf"
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler needs -belf" >&5
 $as_echo_n "checking whether the C compiler needs -belf... " >&6; }
-if test "${lt_cv_cc_needs_belf+set}" = set; then :
+if ${lt_cv_cc_needs_belf+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_ext=c
@@ -9714,7 +9749,7 @@
 set dummy ${ac_tool_prefix}mt; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_MANIFEST_TOOL+set}" = set; then :
+if ${ac_cv_prog_MANIFEST_TOOL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$MANIFEST_TOOL"; then
@@ -9754,7 +9789,7 @@
 set dummy mt; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_MANIFEST_TOOL+set}" = set; then :
+if ${ac_cv_prog_ac_ct_MANIFEST_TOOL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_MANIFEST_TOOL"; then
@@ -9804,7 +9839,7 @@
 test -z "$MANIFEST_TOOL" && MANIFEST_TOOL=mt
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $MANIFEST_TOOL is a manifest tool" >&5
 $as_echo_n "checking if $MANIFEST_TOOL is a manifest tool... " >&6; }
-if test "${lt_cv_path_mainfest_tool+set}" = set; then :
+if ${lt_cv_path_mainfest_tool+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_path_mainfest_tool=no
@@ -9834,7 +9869,7 @@
 set dummy ${ac_tool_prefix}dsymutil; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_DSYMUTIL+set}" = set; then :
+if ${ac_cv_prog_DSYMUTIL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$DSYMUTIL"; then
@@ -9874,7 +9909,7 @@
 set dummy dsymutil; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_DSYMUTIL+set}" = set; then :
+if ${ac_cv_prog_ac_ct_DSYMUTIL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_DSYMUTIL"; then
@@ -9926,7 +9961,7 @@
 set dummy ${ac_tool_prefix}nmedit; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_NMEDIT+set}" = set; then :
+if ${ac_cv_prog_NMEDIT+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$NMEDIT"; then
@@ -9966,7 +10001,7 @@
 set dummy nmedit; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_NMEDIT+set}" = set; then :
+if ${ac_cv_prog_ac_ct_NMEDIT+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_NMEDIT"; then
@@ -10018,7 +10053,7 @@
 set dummy ${ac_tool_prefix}lipo; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_LIPO+set}" = set; then :
+if ${ac_cv_prog_LIPO+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$LIPO"; then
@@ -10058,7 +10093,7 @@
 set dummy lipo; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_LIPO+set}" = set; then :
+if ${ac_cv_prog_ac_ct_LIPO+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_LIPO"; then
@@ -10110,7 +10145,7 @@
 set dummy ${ac_tool_prefix}otool; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_OTOOL+set}" = set; then :
+if ${ac_cv_prog_OTOOL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$OTOOL"; then
@@ -10150,7 +10185,7 @@
 set dummy otool; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_OTOOL+set}" = set; then :
+if ${ac_cv_prog_ac_ct_OTOOL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_OTOOL"; then
@@ -10202,7 +10237,7 @@
 set dummy ${ac_tool_prefix}otool64; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_OTOOL64+set}" = set; then :
+if ${ac_cv_prog_OTOOL64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$OTOOL64"; then
@@ -10242,7 +10277,7 @@
 set dummy otool64; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_OTOOL64+set}" = set; then :
+if ${ac_cv_prog_ac_ct_OTOOL64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_OTOOL64"; then
@@ -10317,7 +10352,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -single_module linker flag" >&5
 $as_echo_n "checking for -single_module linker flag... " >&6; }
-if test "${lt_cv_apple_cc_single_mod+set}" = set; then :
+if ${lt_cv_apple_cc_single_mod+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_apple_cc_single_mod=no
@@ -10353,7 +10388,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -exported_symbols_list linker flag" >&5
 $as_echo_n "checking for -exported_symbols_list linker flag... " >&6; }
-if test "${lt_cv_ld_exported_symbols_list+set}" = set; then :
+if ${lt_cv_ld_exported_symbols_list+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_ld_exported_symbols_list=no
@@ -10385,7 +10420,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -force_load linker flag" >&5
 $as_echo_n "checking for -force_load linker flag... " >&6; }
-if test "${lt_cv_ld_force_load+set}" = set; then :
+if ${lt_cv_ld_force_load+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_ld_force_load=no
@@ -10456,7 +10491,7 @@
 do :
   ac_fn_c_check_header_compile "$LINENO" "dlfcn.h" "ac_cv_header_dlfcn_h" "$ac_includes_default
 "
-if test "x$ac_cv_header_dlfcn_h" = x""yes; then :
+if test "x$ac_cv_header_dlfcn_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DLFCN_H 1
 _ACEOF
@@ -10660,7 +10695,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for objdir" >&5
 $as_echo_n "checking for objdir... " >&6; }
-if test "${lt_cv_objdir+set}" = set; then :
+if ${lt_cv_objdir+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   rm -f .libs 2>/dev/null
@@ -10738,7 +10773,7 @@
   if test "$file_magic_cmd" = '$MAGIC_CMD'; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ${ac_tool_prefix}file" >&5
 $as_echo_n "checking for ${ac_tool_prefix}file... " >&6; }
-if test "${lt_cv_path_MAGIC_CMD+set}" = set; then :
+if ${lt_cv_path_MAGIC_CMD+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $MAGIC_CMD in
@@ -10804,7 +10839,7 @@
   if test -n "$ac_tool_prefix"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for file" >&5
 $as_echo_n "checking for file... " >&6; }
-if test "${lt_cv_path_MAGIC_CMD+set}" = set; then :
+if ${lt_cv_path_MAGIC_CMD+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $MAGIC_CMD in
@@ -10946,7 +10981,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
 $as_echo_n "checking if $compiler supports -fno-rtti -fno-exceptions... " >&6; }
-if test "${lt_cv_prog_compiler_rtti_exceptions+set}" = set; then :
+if ${lt_cv_prog_compiler_rtti_exceptions+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_prog_compiler_rtti_exceptions=no
@@ -11308,7 +11343,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
 $as_echo_n "checking for $compiler option to produce PIC... " >&6; }
-if test "${lt_cv_prog_compiler_pic+set}" = set; then :
+if ${lt_cv_prog_compiler_pic+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_prog_compiler_pic=$lt_prog_compiler_pic
@@ -11323,7 +11358,7 @@
 if test -n "$lt_prog_compiler_pic"; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
 $as_echo_n "checking if $compiler PIC flag $lt_prog_compiler_pic works... " >&6; }
-if test "${lt_cv_prog_compiler_pic_works+set}" = set; then :
+if ${lt_cv_prog_compiler_pic_works+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_prog_compiler_pic_works=no
@@ -11387,7 +11422,7 @@
 wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\"$lt_prog_compiler_static\"
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
 $as_echo_n "checking if $compiler static flag $lt_tmp_static_flag works... " >&6; }
-if test "${lt_cv_prog_compiler_static_works+set}" = set; then :
+if ${lt_cv_prog_compiler_static_works+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_prog_compiler_static_works=no
@@ -11430,7 +11465,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
 $as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
-if test "${lt_cv_prog_compiler_c_o+set}" = set; then :
+if ${lt_cv_prog_compiler_c_o+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_prog_compiler_c_o=no
@@ -11485,7 +11520,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
 $as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
-if test "${lt_cv_prog_compiler_c_o+set}" = set; then :
+if ${lt_cv_prog_compiler_c_o+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_prog_compiler_c_o=no
@@ -12052,7 +12087,7 @@
         if test "${lt_cv_aix_libpath+set}" = set; then
   aix_libpath=$lt_cv_aix_libpath
 else
-  if test "${lt_cv_aix_libpath_+set}" = set; then :
+  if ${lt_cv_aix_libpath_+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -12104,7 +12139,7 @@
 	 if test "${lt_cv_aix_libpath+set}" = set; then
   aix_libpath=$lt_cv_aix_libpath
 else
-  if test "${lt_cv_aix_libpath_+set}" = set; then :
+  if ${lt_cv_aix_libpath_+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -12372,7 +12407,7 @@
 	  # (HP92453-01 A.11.01.20 doesn't, HP92453-01 B.11.X.35175-35176.GP does)
 	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $CC understands -b" >&5
 $as_echo_n "checking if $CC understands -b... " >&6; }
-if test "${lt_cv_prog_compiler__b+set}" = set; then :
+if ${lt_cv_prog_compiler__b+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_prog_compiler__b=no
@@ -12441,7 +12476,7 @@
 	# This should be the same for all languages, so no per-tag cache variable.
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $host_os linker accepts -exported_symbol" >&5
 $as_echo_n "checking whether the $host_os linker accepts -exported_symbol... " >&6; }
-if test "${lt_cv_irix_exported_symbol+set}" = set; then :
+if ${lt_cv_irix_exported_symbol+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   save_LDFLAGS="$LDFLAGS"
@@ -12757,7 +12792,7 @@
       # to ld, don't add -lc before -lgcc.
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
 $as_echo_n "checking whether -lc should be explicitly linked in... " >&6; }
-if test "${lt_cv_archive_cmds_need_lc+set}" = set; then :
+if ${lt_cv_archive_cmds_need_lc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   $RM conftest*
@@ -13439,7 +13474,7 @@
   shlibpath_overrides_runpath=no
 
   # Some binutils ld are patched to set DT_RUNPATH
-  if test "${lt_cv_shlibpath_overrides_runpath+set}" = set; then :
+  if ${lt_cv_shlibpath_overrides_runpath+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_shlibpath_overrides_runpath=no
@@ -13870,7 +13905,7 @@
   # if libdl is installed we need to link against it
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
 $as_echo_n "checking for dlopen in -ldl... " >&6; }
-if test "${ac_cv_lib_dl_dlopen+set}" = set; then :
+if ${ac_cv_lib_dl_dlopen+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -13901,7 +13936,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
 $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
-if test "x$ac_cv_lib_dl_dlopen" = x""yes; then :
+if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
 else
 
@@ -13915,12 +13950,12 @@
 
   *)
     ac_fn_c_check_func "$LINENO" "shl_load" "ac_cv_func_shl_load"
-if test "x$ac_cv_func_shl_load" = x""yes; then :
+if test "x$ac_cv_func_shl_load" = xyes; then :
   lt_cv_dlopen="shl_load"
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for shl_load in -ldld" >&5
 $as_echo_n "checking for shl_load in -ldld... " >&6; }
-if test "${ac_cv_lib_dld_shl_load+set}" = set; then :
+if ${ac_cv_lib_dld_shl_load+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -13951,16 +13986,16 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_shl_load" >&5
 $as_echo "$ac_cv_lib_dld_shl_load" >&6; }
-if test "x$ac_cv_lib_dld_shl_load" = x""yes; then :
+if test "x$ac_cv_lib_dld_shl_load" = xyes; then :
   lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
 else
   ac_fn_c_check_func "$LINENO" "dlopen" "ac_cv_func_dlopen"
-if test "x$ac_cv_func_dlopen" = x""yes; then :
+if test "x$ac_cv_func_dlopen" = xyes; then :
   lt_cv_dlopen="dlopen"
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
 $as_echo_n "checking for dlopen in -ldl... " >&6; }
-if test "${ac_cv_lib_dl_dlopen+set}" = set; then :
+if ${ac_cv_lib_dl_dlopen+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -13991,12 +14026,12 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
 $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
-if test "x$ac_cv_lib_dl_dlopen" = x""yes; then :
+if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -lsvld" >&5
 $as_echo_n "checking for dlopen in -lsvld... " >&6; }
-if test "${ac_cv_lib_svld_dlopen+set}" = set; then :
+if ${ac_cv_lib_svld_dlopen+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -14027,12 +14062,12 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_svld_dlopen" >&5
 $as_echo "$ac_cv_lib_svld_dlopen" >&6; }
-if test "x$ac_cv_lib_svld_dlopen" = x""yes; then :
+if test "x$ac_cv_lib_svld_dlopen" = xyes; then :
   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dld_link in -ldld" >&5
 $as_echo_n "checking for dld_link in -ldld... " >&6; }
-if test "${ac_cv_lib_dld_dld_link+set}" = set; then :
+if ${ac_cv_lib_dld_dld_link+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -14063,7 +14098,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_dld_link" >&5
 $as_echo "$ac_cv_lib_dld_dld_link" >&6; }
-if test "x$ac_cv_lib_dld_dld_link" = x""yes; then :
+if test "x$ac_cv_lib_dld_dld_link" = xyes; then :
   lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"
 fi
 
@@ -14104,7 +14139,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a program can dlopen itself" >&5
 $as_echo_n "checking whether a program can dlopen itself... " >&6; }
-if test "${lt_cv_dlopen_self+set}" = set; then :
+if ${lt_cv_dlopen_self+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   	  if test "$cross_compiling" = yes; then :
@@ -14210,7 +14245,7 @@
       wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a statically linked program can dlopen itself" >&5
 $as_echo_n "checking whether a statically linked program can dlopen itself... " >&6; }
-if test "${lt_cv_dlopen_self_static+set}" = set; then :
+if ${lt_cv_dlopen_self_static+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   	  if test "$cross_compiling" = yes; then :
@@ -14547,7 +14582,7 @@
 $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
 set x ${MAKE-make}
 ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
-if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_prog_make_${ac_make}_set+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat >conftest.make <<\_ACEOF
@@ -14555,7 +14590,7 @@
 all:
 	@echo '@@@%%%=$(MAKE)=@@@%%%'
 _ACEOF
-# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
+# GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
 case `${MAKE-make} -f conftest.make 2>/dev/null` in
   *@@@%%%=?*=@@@%%%*)
     eval ac_cv_prog_make_${ac_make}_set=yes;;
@@ -14577,7 +14612,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inline" >&5
 $as_echo_n "checking for inline... " >&6; }
-if test "${ac_cv_c_inline+set}" = set; then :
+if ${ac_cv_c_inline+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_c_inline=no
@@ -14638,10 +14673,10 @@
 $as_echo_n "checking if compiler is DEC/Compaq/HP C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -14666,7 +14701,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___DECC=no
 
@@ -14678,10 +14713,10 @@
 
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -14706,7 +14741,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___DECC_VER=no
 
@@ -14737,10 +14772,10 @@
 $as_echo_n "checking if compiler is HP-UX C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -14765,7 +14800,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___HP_cc=no
 
@@ -14795,10 +14830,10 @@
 $as_echo_n "checking if compiler is IBM C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -14823,7 +14858,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___IBMC__=no
 
@@ -14861,10 +14896,10 @@
 $as_echo_n "checking if compiler is Intel C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -14889,7 +14924,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___INTEL_COMPILER=no
 
@@ -14905,10 +14940,10 @@
     compiler_num="$curl_cv_def___INTEL_COMPILER"
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -14933,7 +14968,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___unix__=no
 
@@ -14977,10 +15012,10 @@
 $as_echo_n "checking if compiler is clang... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15005,7 +15040,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___clang__=no
 
@@ -15046,10 +15081,10 @@
 $as_echo_n "checking if compiler is GNU C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15074,7 +15109,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___GNUC__=no
 
@@ -15108,10 +15143,10 @@
     flags_opt_off="-O0"
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15136,7 +15171,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def__WIN32=no
 
@@ -15156,10 +15191,10 @@
 $as_echo_n "checking if compiler is LCC... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15184,7 +15219,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___LCC__=no
 
@@ -15214,10 +15249,10 @@
 $as_echo_n "checking if compiler is SGI MIPSpro C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15242,7 +15277,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___GNUC__=no
 
@@ -15254,10 +15289,10 @@
 
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15282,7 +15317,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def__COMPILER_VERSION=no
 
@@ -15294,10 +15329,10 @@
 
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15322,7 +15357,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def__SGI_COMPILER_VERSION=no
 
@@ -15354,10 +15389,10 @@
 $as_echo_n "checking if compiler is SGI MIPS C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15382,7 +15417,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___GNUC__=no
 
@@ -15394,10 +15429,10 @@
 
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15422,7 +15457,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___sgi=no
 
@@ -15454,10 +15489,10 @@
 $as_echo_n "checking if compiler is SunPro C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15482,7 +15517,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___SUNPRO_C=no
 
@@ -15512,10 +15547,10 @@
 $as_echo_n "checking if compiler is Tiny C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15540,7 +15575,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___TINYC__=no
 
@@ -15570,10 +15605,10 @@
 $as_echo_n "checking if compiler is Watcom C... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15598,7 +15633,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___WATCOMC__=no
 
@@ -15613,10 +15648,10 @@
 $as_echo "yes" >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -15641,7 +15676,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def___UNIX__=no
 
@@ -15913,8 +15948,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -16105,8 +16140,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -16350,8 +16385,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -16720,8 +16755,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -16814,7 +16849,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
-    as_fn_error "compiler does not halt on compilation errors." "$LINENO" 5
+    as_fn_error $? "compiler does not halt on compilation errors." "$LINENO" 5
 
 else
 
@@ -16847,7 +16882,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
-    as_fn_error "compiler does not halt on negative sized arrays." "$LINENO" 5
+    as_fn_error $? "compiler does not halt on negative sized arrays." "$LINENO" 5
 
 else
 
@@ -17122,7 +17157,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for windows.h" >&5
 $as_echo_n "checking for windows.h... " >&6; }
-if test "${ac_cv_header_windows_h+set}" = set; then :
+if ${ac_cv_header_windows_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17182,7 +17217,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether build target is a native Windows one" >&5
 $as_echo_n "checking whether build target is a native Windows one... " >&6; }
-if test "${ac_cv_native_windows+set}" = set; then :
+if ${ac_cv_native_windows+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17240,7 +17275,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for winsock.h" >&5
 $as_echo_n "checking for winsock.h... " >&6; }
-if test "${ac_cv_header_winsock_h+set}" = set; then :
+if ${ac_cv_header_winsock_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17296,7 +17331,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for winsock2.h" >&5
 $as_echo_n "checking for winsock2.h... " >&6; }
-if test "${ac_cv_header_winsock2_h+set}" = set; then :
+if ${ac_cv_header_winsock2_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17352,7 +17387,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ws2tcpip.h" >&5
 $as_echo_n "checking for ws2tcpip.h... " >&6; }
-if test "${ac_cv_header_ws2tcpip_h+set}" = set; then :
+if ${ac_cv_header_ws2tcpip_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17409,7 +17444,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for winldap.h" >&5
 $as_echo_n "checking for winldap.h... " >&6; }
-if test "${ac_cv_header_winldap_h+set}" = set; then :
+if ${ac_cv_header_winldap_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17468,7 +17503,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for winber.h" >&5
 $as_echo_n "checking for winber.h... " >&6; }
-if test "${ac_cv_header_winber_h+set}" = set; then :
+if ${ac_cv_header_winber_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17799,7 +17834,7 @@
 
        ;;
   *)   if test x$CURL_DISABLE_HTTP = x1 ; then
-          as_fn_error "HTTP support needs to be enabled in order to enable RTSP support!" "$LINENO" 5
+          as_fn_error $? "HTTP support needs to be enabled in order to enable RTSP support!" "$LINENO" 5
        else
           { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
@@ -18102,13 +18137,13 @@
 
 
 ac_fn_c_check_func "$LINENO" "gethostbyname" "ac_cv_func_gethostbyname"
-if test "x$ac_cv_func_gethostbyname" = x""yes; then :
+if test "x$ac_cv_func_gethostbyname" = xyes; then :
   HAVE_GETHOSTBYNAME="1"
 
 else
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnsl" >&5
 $as_echo_n "checking for gethostbyname in -lnsl... " >&6; }
-if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then :
+if ${ac_cv_lib_nsl_gethostbyname+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -18139,7 +18174,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostbyname" >&5
 $as_echo "$ac_cv_lib_nsl_gethostbyname" >&6; }
-if test "x$ac_cv_lib_nsl_gethostbyname" = x""yes; then :
+if test "x$ac_cv_lib_nsl_gethostbyname" = xyes; then :
   HAVE_GETHOSTBYNAME="1"
                              LIBS="$LIBS -lnsl"
 
@@ -18153,7 +18188,7 @@
 then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lsocket" >&5
 $as_echo_n "checking for gethostbyname in -lsocket... " >&6; }
-if test "${ac_cv_lib_socket_gethostbyname+set}" = set; then :
+if ${ac_cv_lib_socket_gethostbyname+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -18184,7 +18219,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_gethostbyname" >&5
 $as_echo "$ac_cv_lib_socket_gethostbyname" >&6; }
-if test "x$ac_cv_lib_socket_gethostbyname" = x""yes; then :
+if test "x$ac_cv_lib_socket_gethostbyname" = xyes; then :
   HAVE_GETHOSTBYNAME="1"
                LIBS="$LIBS -lsocket"
 
@@ -18196,7 +18231,7 @@
 then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lwatt" >&5
 $as_echo_n "checking for gethostbyname in -lwatt... " >&6; }
-if test "${ac_cv_lib_watt_gethostbyname+set}" = set; then :
+if ${ac_cv_lib_watt_gethostbyname+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -18227,7 +18262,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_watt_gethostbyname" >&5
 $as_echo "$ac_cv_lib_watt_gethostbyname" >&6; }
-if test "x$ac_cv_lib_watt_gethostbyname" = x""yes; then :
+if test "x$ac_cv_lib_watt_gethostbyname" = xyes; then :
   HAVE_GETHOSTBYNAME="1"
                CPPFLAGS="-I/dev/env/WATT_ROOT/inc"
                LDFLAGS="-L/dev/env/WATT_ROOT/lib"
@@ -18422,7 +18457,7 @@
 then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnetwork" >&5
 $as_echo_n "checking for gethostbyname in -lnetwork... " >&6; }
-if test "${ac_cv_lib_network_gethostbyname+set}" = set; then :
+if ${ac_cv_lib_network_gethostbyname+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -18453,7 +18488,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_network_gethostbyname" >&5
 $as_echo "$ac_cv_lib_network_gethostbyname" >&6; }
-if test "x$ac_cv_lib_network_gethostbyname" = x""yes; then :
+if test "x$ac_cv_lib_network_gethostbyname" = xyes; then :
   HAVE_GETHOSTBYNAME="1"
                LIBS="$LIBS -lnetwork"
 
@@ -18465,7 +18500,7 @@
 then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnet" >&5
 $as_echo_n "checking for gethostbyname in -lnet... " >&6; }
-if test "${ac_cv_lib_net_gethostbyname+set}" = set; then :
+if ${ac_cv_lib_net_gethostbyname+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -18496,7 +18531,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_net_gethostbyname" >&5
 $as_echo "$ac_cv_lib_net_gethostbyname" >&6; }
-if test "x$ac_cv_lib_net_gethostbyname" = x""yes; then :
+if test "x$ac_cv_lib_net_gethostbyname" = xyes; then :
   HAVE_GETHOSTBYNAME="1"
                LIBS="$LIBS -lnet"
 
@@ -18506,16 +18541,16 @@
 
 
 if test "$HAVE_GETHOSTBYNAME" != "1"; then
-  as_fn_error "couldn't find libraries for gethostbyname()" "$LINENO" 5
+  as_fn_error $? "couldn't find libraries for gethostbyname()" "$LINENO" 5
 fi
 
 ac_fn_c_check_func "$LINENO" "strcasecmp" "ac_cv_func_strcasecmp"
-if test "x$ac_cv_func_strcasecmp" = x""yes; then :
+if test "x$ac_cv_func_strcasecmp" = xyes; then :
 
 else
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for strcasecmp in -lresolve" >&5
 $as_echo_n "checking for strcasecmp in -lresolve... " >&6; }
-if test "${ac_cv_lib_resolve_strcasecmp+set}" = set; then :
+if ${ac_cv_lib_resolve_strcasecmp+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -18546,7 +18581,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolve_strcasecmp" >&5
 $as_echo "$ac_cv_lib_resolve_strcasecmp" >&6; }
-if test "x$ac_cv_lib_resolve_strcasecmp" = x""yes; then :
+if test "x$ac_cv_lib_resolve_strcasecmp" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBRESOLVE 1
 _ACEOF
@@ -18561,7 +18596,7 @@
 if test "$ac_cv_lib_resolve_strcasecmp" = "$ac_cv_func_strcasecmp"; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for strcasecmp in -lresolve" >&5
 $as_echo_n "checking for strcasecmp in -lresolve... " >&6; }
-if test "${ac_cv_lib_resolve_strcasecmp+set}" = set; then :
+if ${ac_cv_lib_resolve_strcasecmp+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -18592,7 +18627,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolve_strcasecmp" >&5
 $as_echo "$ac_cv_lib_resolve_strcasecmp" >&6; }
-if test "x$ac_cv_lib_resolve_strcasecmp" = x""yes; then :
+if test "x$ac_cv_lib_resolve_strcasecmp" = xyes; then :
   LIBS="-lresolve $LIBS"
 fi
 
@@ -18619,7 +18654,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for windows.h" >&5
 $as_echo_n "checking for windows.h... " >&6; }
-if test "${ac_cv_header_windows_h+set}" = set; then :
+if ${ac_cv_header_windows_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -18679,7 +18714,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for winsock.h" >&5
 $as_echo_n "checking for winsock.h... " >&6; }
-if test "${ac_cv_header_winsock_h+set}" = set; then :
+if ${ac_cv_header_winsock_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -18735,7 +18770,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for winsock2.h" >&5
 $as_echo_n "checking for winsock2.h... " >&6; }
-if test "${ac_cv_header_winsock2_h+set}" = set; then :
+if ${ac_cv_header_winsock2_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -18832,7 +18867,7 @@
     X-unknown)
       { $as_echo "$as_me:${as_lineno-$LINENO}: result: cannot find connect" >&5
 $as_echo "cannot find connect" >&6; }
-      as_fn_error "cannot find connect function in libraries." "$LINENO" 5
+      as_fn_error $? "cannot find connect function in libraries." "$LINENO" 5
       ;;
     X-)
       { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
@@ -18850,7 +18885,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether time.h and sys/time.h may both be included" >&5
 $as_echo_n "checking whether time.h and sys/time.h may both be included... " >&6; }
-if test "${ac_cv_header_time+set}" = set; then :
+if ${ac_cv_header_time+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -18887,8 +18922,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -19034,8 +19068,8 @@
       if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -19152,7 +19186,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for lber.h" >&5
 $as_echo_n "checking for lber.h... " >&6; }
-if test "${ac_cv_header_lber_h+set}" = set; then :
+if ${ac_cv_header_lber_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19269,7 +19303,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap.h" >&5
 $as_echo_n "checking for ldap.h... " >&6; }
-if test "${ac_cv_header_ldap_h+set}" = set; then :
+if ${ac_cv_header_ldap_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19334,7 +19368,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldapssl.h" >&5
 $as_echo_n "checking for ldapssl.h... " >&6; }
-if test "${ac_cv_header_ldapssl_h+set}" = set; then :
+if ${ac_cv_header_ldapssl_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19405,7 +19439,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap_ssl.h" >&5
 $as_echo_n "checking for ldap_ssl.h... " >&6; }
-if test "${ac_cv_header_ldap_ssl_h+set}" = set; then :
+if ${ac_cv_header_ldap_ssl_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19481,7 +19515,7 @@
     as_ac_Lib=`$as_echo "ac_cv_lib_"$LDAPLIBNAME"''_ldap_init" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap_init in -l\"$LDAPLIBNAME\"" >&5
 $as_echo_n "checking for ldap_init in -l\"$LDAPLIBNAME\"... " >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$as_ac_Lib+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -19513,8 +19547,7 @@
 eval ac_res=\$$as_ac_Lib
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-eval as_val=\$$as_ac_Lib
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_LIB"$LDAPLIBNAME"" | $as_tr_cpp` 1
 _ACEOF
@@ -19663,7 +19696,7 @@
       as_ac_Lib=`$as_echo "ac_cv_lib_"$LBERLIBNAME"''_ber_free" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ber_free in -l\"$LBERLIBNAME\"" >&5
 $as_echo_n "checking for ber_free in -l\"$LBERLIBNAME\"... " >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$as_ac_Lib+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -19695,8 +19728,7 @@
 eval ac_res=\$$as_ac_Lib
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-eval as_val=\$$as_ac_Lib
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_LIB"$LBERLIBNAME"" | $as_tr_cpp` 1
 _ACEOF
@@ -19728,8 +19760,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -19969,7 +20000,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for des_pcbc_encrypt in -ldes" >&5
 $as_echo_n "checking for des_pcbc_encrypt in -ldes... " >&6; }
-if test "${ac_cv_lib_des_des_pcbc_encrypt+set}" = set; then :
+if ${ac_cv_lib_des_des_pcbc_encrypt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -20000,12 +20031,12 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_des_des_pcbc_encrypt" >&5
 $as_echo "$ac_cv_lib_des_des_pcbc_encrypt" >&6; }
-if test "x$ac_cv_lib_des_des_pcbc_encrypt" = x""yes; then :
+if test "x$ac_cv_lib_des_des_pcbc_encrypt" = xyes; then :
 
     for ac_header in des.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "des.h" "ac_cv_header_des_h" "$ac_includes_default"
-if test "x$ac_cv_header_des_h" = x""yes; then :
+if test "x$ac_cv_header_des_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DES_H 1
 _ACEOF
@@ -20016,12 +20047,12 @@
 
 
         ac_fn_c_check_func "$LINENO" "res_search" "ac_cv_func_res_search"
-if test "x$ac_cv_func_res_search" = x""yes; then :
+if test "x$ac_cv_func_res_search" = xyes; then :
 
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_search in -lresolv" >&5
 $as_echo_n "checking for res_search in -lresolv... " >&6; }
-if test "${ac_cv_lib_resolv_res_search+set}" = set; then :
+if ${ac_cv_lib_resolv_res_search+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -20052,7 +20083,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv_res_search" >&5
 $as_echo "$ac_cv_lib_resolv_res_search" >&6; }
-if test "x$ac_cv_lib_resolv_res_search" = x""yes; then :
+if test "x$ac_cv_lib_resolv_res_search" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBRESOLV 1
 _ACEOF
@@ -20066,7 +20097,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb_net_read in -lkrb" >&5
 $as_echo_n "checking for krb_net_read in -lkrb... " >&6; }
-if test "${ac_cv_lib_krb_krb_net_read+set}" = set; then :
+if ${ac_cv_lib_krb_krb_net_read+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -20097,12 +20128,12 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_krb_krb_net_read" >&5
 $as_echo "$ac_cv_lib_krb_krb_net_read" >&6; }
-if test "x$ac_cv_lib_krb_krb_net_read" = x""yes; then :
+if test "x$ac_cv_lib_krb_krb_net_read" = xyes; then :
 
             for ac_header in krb.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "krb.h" "ac_cv_header_krb_h" "$ac_includes_default"
-if test "x$ac_cv_header_krb_h" = x""yes; then :
+if test "x$ac_cv_header_krb_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_KRB_H 1
 _ACEOF
@@ -20117,7 +20148,7 @@
                   for ac_func in krb_get_our_ip_for_realm
 do :
   ac_fn_c_check_func "$LINENO" "krb_get_our_ip_for_realm" "ac_cv_func_krb_get_our_ip_for_realm"
-if test "x$ac_cv_func_krb_get_our_ip_for_realm" = x""yes; then :
+if test "x$ac_cv_func_krb_get_our_ip_for_realm" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_KRB_GET_OUR_IP_FOR_REALM 1
 _ACEOF
@@ -20138,7 +20169,7 @@
             for ac_func in strlcpy
 do :
   ac_fn_c_check_func "$LINENO" "strlcpy" "ac_cv_func_strlcpy"
-if test "x$ac_cv_func_strlcpy" = x""yes; then :
+if test "x$ac_cv_func_strlcpy" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_STRLCPY 1
 _ACEOF
@@ -20176,7 +20207,7 @@
 if test x"$want_spnego" = xyes; then
 
   if test X"$SPNEGO_ROOT" = Xyes; then
-     as_fn_error "FBOpenSSL libs and/or directories were not found where specified!" "$LINENO" 5
+     as_fn_error $? "FBOpenSSL libs and/or directories were not found where specified!" "$LINENO" 5
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
   else
@@ -20252,7 +20283,7 @@
   CPPFLAGS="$CPPFLAGS $GSSAPI_INCS"
 
   ac_fn_c_check_header_mongrel "$LINENO" "gss.h" "ac_cv_header_gss_h" "$ac_includes_default"
-if test "x$ac_cv_header_gss_h" = x""yes; then :
+if test "x$ac_cv_header_gss_h" = xyes; then :
 
 
 $as_echo "#define HAVE_GSSGNU 1" >>confdefs.h
@@ -20264,7 +20295,7 @@
             for ac_header in gssapi/gssapi.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "gssapi/gssapi.h" "ac_cv_header_gssapi_gssapi_h" "$ac_includes_default"
-if test "x$ac_cv_header_gssapi_gssapi_h" = x""yes; then :
+if test "x$ac_cv_header_gssapi_gssapi_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GSSAPI_GSSAPI_H 1
 _ACEOF
@@ -20285,8 +20316,7 @@
 #endif
 
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -20299,7 +20329,7 @@
 
       if test "x$not_mit" = "x1"; then
                 ac_fn_c_check_header_mongrel "$LINENO" "gssapi.h" "ac_cv_header_gssapi_h" "$ac_includes_default"
-if test "x$ac_cv_header_gssapi_h" = x""yes; then :
+if test "x$ac_cv_header_gssapi_h" = xyes; then :
 
 
 $as_echo "#define HAVE_GSSHEIMDAL 1" >>confdefs.h
@@ -20535,7 +20565,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -20580,7 +20610,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -20710,9 +20740,9 @@
       ;;
   esac
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CRYPTO_lock in -lcrypto" >&5
-$as_echo_n "checking for CRYPTO_lock in -lcrypto... " >&6; }
-if test "${ac_cv_lib_crypto_CRYPTO_lock+set}" = set; then :
+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sunw_CRYPTO_lock in -lcrypto" >&5
+$as_echo_n "checking for sunw_CRYPTO_lock in -lcrypto... " >&6; }
+if ${ac_cv_lib_crypto_sunw_CRYPTO_lock+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -20724,26 +20754,26 @@
 #ifdef __cplusplus
 extern "C"
 #endif
-char CRYPTO_lock ();
+char sunw_CRYPTO_lock ();
 int main (void)
 {
-return CRYPTO_lock ();
+return sunw_CRYPTO_lock ();
  ;
  return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_crypto_CRYPTO_lock=yes
+  ac_cv_lib_crypto_sunw_CRYPTO_lock=yes
 else
-  ac_cv_lib_crypto_CRYPTO_lock=no
+  ac_cv_lib_crypto_sunw_CRYPTO_lock=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_CRYPTO_lock" >&5
-$as_echo "$ac_cv_lib_crypto_CRYPTO_lock" >&6; }
-if test "x$ac_cv_lib_crypto_CRYPTO_lock" = x""yes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_sunw_CRYPTO_lock" >&5
+$as_echo "$ac_cv_lib_crypto_sunw_CRYPTO_lock" >&6; }
+if test "x$ac_cv_lib_crypto_sunw_CRYPTO_lock" = xyes; then :
 
      HAVECRYPTO="yes"
      LIBS="-lcrypto $LIBS"
@@ -20752,9 +20782,9 @@
 
      LDFLAGS="$CLEANLDFLAGS -L$LIB_OPENSSL"
      CPPFLAGS="$CLEANCPPFLAGS -I$PREFIX_OPENSSL/include/openssl -I$PREFIX_OPENSSL/include"
-     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CRYPTO_add_lock in -lcrypto" >&5
-$as_echo_n "checking for CRYPTO_add_lock in -lcrypto... " >&6; }
-if test "${ac_cv_lib_crypto_CRYPTO_add_lock+set}" = set; then :
+     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sunw_CRYPTO_add_lock in -lcrypto" >&5
+$as_echo_n "checking for sunw_CRYPTO_add_lock in -lcrypto... " >&6; }
+if ${ac_cv_lib_crypto_sunw_CRYPTO_add_lock+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -20766,26 +20796,26 @@
 #ifdef __cplusplus
 extern "C"
 #endif
-char CRYPTO_add_lock ();
+char sunw_CRYPTO_add_lock ();
 int main (void)
 {
-return CRYPTO_add_lock ();
+return sunw_CRYPTO_add_lock ();
  ;
  return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_crypto_CRYPTO_add_lock=yes
+  ac_cv_lib_crypto_sunw_CRYPTO_add_lock=yes
 else
-  ac_cv_lib_crypto_CRYPTO_add_lock=no
+  ac_cv_lib_crypto_sunw_CRYPTO_add_lock=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_CRYPTO_add_lock" >&5
-$as_echo "$ac_cv_lib_crypto_CRYPTO_add_lock" >&6; }
-if test "x$ac_cv_lib_crypto_CRYPTO_add_lock" = x""yes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_sunw_CRYPTO_add_lock" >&5
+$as_echo "$ac_cv_lib_crypto_sunw_CRYPTO_add_lock" >&6; }
+if test "x$ac_cv_lib_crypto_sunw_CRYPTO_add_lock" = xyes; then :
 
        HAVECRYPTO="yes"
        LIBS="-lcrypto $LIBS"
@@ -20804,9 +20834,9 @@
 
   if test X"$HAVECRYPTO" = X"yes"; then
 
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SSL_connect in -lssl" >&5
-$as_echo_n "checking for SSL_connect in -lssl... " >&6; }
-if test "${ac_cv_lib_ssl_SSL_connect+set}" = set; then :
+    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sunw_SSL_connect in -lssl" >&5
+$as_echo_n "checking for sunw_SSL_connect in -lssl... " >&6; }
+if ${ac_cv_lib_ssl_sunw_SSL_connect+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -20818,26 +20848,26 @@
 #ifdef __cplusplus
 extern "C"
 #endif
-char SSL_connect ();
+char sunw_SSL_connect ();
 int main (void)
 {
-return SSL_connect ();
+return sunw_SSL_connect ();
  ;
  return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_ssl_SSL_connect=yes
+  ac_cv_lib_ssl_sunw_SSL_connect=yes
 else
-  ac_cv_lib_ssl_SSL_connect=no
+  ac_cv_lib_ssl_sunw_SSL_connect=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_SSL_connect" >&5
-$as_echo "$ac_cv_lib_ssl_SSL_connect" >&6; }
-if test "x$ac_cv_lib_ssl_SSL_connect" = x""yes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_sunw_SSL_connect" >&5
+$as_echo "$ac_cv_lib_ssl_sunw_SSL_connect" >&6; }
+if test "x$ac_cv_lib_ssl_sunw_SSL_connect" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBSSL 1
 _ACEOF
@@ -20847,14 +20877,14 @@
 fi
 
 
-    if test "$ac_cv_lib_ssl_SSL_connect" != yes; then
+    if test "$ac_cv_lib_ssl_sunw_SSL_connect" != yes; then
                 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ssl with RSAglue/rsaref libs in use" >&5
 $as_echo_n "checking for ssl with RSAglue/rsaref libs in use... " >&6; };
         OLIBS=$LIBS
         LIBS="$LIBS -lRSAglue -lrsaref"
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SSL_connect in -lssl" >&5
-$as_echo_n "checking for SSL_connect in -lssl... " >&6; }
-if test "${ac_cv_lib_ssl_SSL_connect+set}" = set; then :
+        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sunw_SSL_connect in -lssl" >&5
+$as_echo_n "checking for sunw_SSL_connect in -lssl... " >&6; }
+if ${ac_cv_lib_ssl_sunw_SSL_connect+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -20866,26 +20896,26 @@
 #ifdef __cplusplus
 extern "C"
 #endif
-char SSL_connect ();
+char sunw_SSL_connect ();
 int main (void)
 {
-return SSL_connect ();
+return sunw_SSL_connect ();
  ;
  return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_ssl_SSL_connect=yes
+  ac_cv_lib_ssl_sunw_SSL_connect=yes
 else
-  ac_cv_lib_ssl_SSL_connect=no
+  ac_cv_lib_ssl_sunw_SSL_connect=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_SSL_connect" >&5
-$as_echo "$ac_cv_lib_ssl_SSL_connect" >&6; }
-if test "x$ac_cv_lib_ssl_SSL_connect" = x""yes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_sunw_SSL_connect" >&5
+$as_echo "$ac_cv_lib_ssl_sunw_SSL_connect" >&6; }
+if test "x$ac_cv_lib_ssl_sunw_SSL_connect" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBSSL 1
 _ACEOF
@@ -20894,7 +20924,7 @@
 
 fi
 
-        if test "$ac_cv_lib_ssl_SSL_connect" != yes; then
+        if test "$ac_cv_lib_ssl_sunw_SSL_connect" != yes; then
                         { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
             LIBS=$OLIBS
@@ -20910,8 +20940,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -20930,8 +20959,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -20958,7 +20986,7 @@
               for ac_header in openssl/pkcs12.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "openssl/pkcs12.h" "ac_cv_header_openssl_pkcs12_h" "$ac_includes_default"
-if test "x$ac_cv_header_openssl_pkcs12_h" = x""yes; then :
+if test "x$ac_cv_header_openssl_pkcs12_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_OPENSSL_PKCS12_H 1
 _ACEOF
@@ -20975,18 +21003,18 @@
 
     if test X"$OPT_SSL" != Xoff &&
        test "$OPENSSL_ENABLED" != "1"; then
-      as_fn_error "OpenSSL libs and/or directories were not found where specified!" "$LINENO" 5
+      as_fn_error $? "OpenSSL libs and/or directories were not found where specified!" "$LINENO" 5
     fi
   fi
 
   if test X"$OPENSSL_ENABLED" = X"1"; then
-            ac_fn_c_check_func "$LINENO" "ENGINE_init" "ac_cv_func_ENGINE_init"
-if test "x$ac_cv_func_ENGINE_init" = x""yes; then :
+            ac_fn_c_check_func "$LINENO" "sunw_ENGINE_init" "ac_cv_func_sunw_ENGINE_init"
+if test "x$ac_cv_func_sunw_ENGINE_init" = xyes; then :
 
                 for ac_header in openssl/engine.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "openssl/engine.h" "ac_cv_header_openssl_engine_h" "$ac_includes_default"
-if test "x$ac_cv_header_openssl_engine_h" = x""yes; then :
+if test "x$ac_cv_header_openssl_engine_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_OPENSSL_ENGINE_H 1
 _ACEOF
@@ -20995,12 +21023,11 @@
 
 done
 
-                for ac_func in ENGINE_load_builtin_engines
+                for ac_func in sunw_ENGINE_load_builtin_engines
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -21013,18 +21040,17 @@
 
 
 
-    for ac_func in RAND_status \
-                    RAND_screen \
-                    RAND_egd \
-                    ENGINE_cleanup \
-                    CRYPTO_cleanup_all_ex_data \
-                    SSL_get_shutdown \
-                    SSLv2_client_method
+    for ac_func in sunw_RAND_status \
+                    sunw_RAND_screen \
+                    sunw_RAND_egd \
+                    sunw_ENGINE_cleanup \
+                    sunw_CRYPTO_cleanup_all_ex_data \
+                    sunw_SSL_get_shutdown \
+                    sunw_SSLv2_client_method
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -21095,10 +21121,10 @@
 $as_echo_n "checking for OpenSSL headers version... " >&6; }
 
       if test -z "$SED"; then
-    as_fn_error "SED not set. Cannot continue without SED being set." "$LINENO" 5
+    as_fn_error $? "SED not set. Cannot continue without SED being set." "$LINENO" 5
   fi
   if test -z "$GREP"; then
-    as_fn_error "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
+    as_fn_error $? "GREP not set. Cannot continue without GREP being set." "$LINENO" 5
   fi
 
   tmp_exp=""
@@ -21129,7 +21155,7 @@
     fi
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
   if test -z "$tmp_exp"; then
     curl_cv_have_def_OPENSSL_VERSION_NUMBER=no
 
@@ -21231,24 +21257,24 @@
 /* end confdefs.h.  */
 
 
-#define SSL_CTX_set_not_resumable_session_callback innocuous_SSL_CTX_set_not_resumable_session_callback
+#define sunw_SSL_CTX_set_not_resumable_session_callback innocuous_sunw_SSL_CTX_set_not_resumable_session_callback
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef SSL_CTX_set_not_resumable_session_callback
+#undef sunw_SSL_CTX_set_not_resumable_session_callback
 #ifdef __cplusplus
 extern "C"
 #endif
-char SSL_CTX_set_not_resumable_session_callback ();
-#if defined __stub_SSL_CTX_set_not_resumable_session_callback || defined __stub___SSL_CTX_set_not_resumable_session_callback
+char sunw_SSL_CTX_set_not_resumable_session_callback ();
+#if defined __stub_sunw_SSL_CTX_set_not_resumable_session_callback || defined __stub___sunw_SSL_CTX_set_not_resumable_session_callback
 choke me
 #endif
 
 int main (void)
 {
-return SSL_CTX_set_not_resumable_session_callback ();
+return sunw_SSL_CTX_set_not_resumable_session_callback ();
  ;
  return 0;
 }
@@ -21269,24 +21295,24 @@
 /* end confdefs.h.  */
 
 
-#define SSL_renegotiate_abbreviated innocuous_SSL_renegotiate_abbreviated
+#define sunw_SSL_renegotiate_abbreviated innocuous_sunw_SSL_renegotiate_abbreviated
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef SSL_renegotiate_abbreviated
+#undef sunw_SSL_renegotiate_abbreviated
 #ifdef __cplusplus
 extern "C"
 #endif
-char SSL_renegotiate_abbreviated ();
-#if defined __stub_SSL_renegotiate_abbreviated || defined __stub___SSL_renegotiate_abbreviated
+char sunw_SSL_renegotiate_abbreviated ();
+#if defined __stub_sunw_SSL_renegotiate_abbreviated || defined __stub___sunw_SSL_renegotiate_abbreviated
 choke me
 #endif
 
 int main (void)
 {
-return SSL_renegotiate_abbreviated ();
+return sunw_SSL_renegotiate_abbreviated ();
  ;
  return 0;
 }
@@ -21305,24 +21331,24 @@
 /* end confdefs.h.  */
 
 
-#define OBJ_add_sigid innocuous_OBJ_add_sigid
+#define sunw_OBJ_add_sigid innocuous_sunw_OBJ_add_sigid
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef OBJ_add_sigid
+#undef sunw_OBJ_add_sigid
 #ifdef __cplusplus
 extern "C"
 #endif
-char OBJ_add_sigid ();
-#if defined __stub_OBJ_add_sigid || defined __stub___OBJ_add_sigid
+char sunw_OBJ_add_sigid ();
+#if defined __stub_sunw_OBJ_add_sigid || defined __stub___sunw_OBJ_add_sigid
 choke me
 #endif
 
 int main (void)
 {
-return OBJ_add_sigid ();
+return sunw_OBJ_add_sigid ();
  ;
  return 0;
 }
@@ -21341,24 +21367,24 @@
 /* end confdefs.h.  */
 
 
-#define ERR_set_mark innocuous_ERR_set_mark
+#define sunw_ERR_set_mark innocuous_sunw_ERR_set_mark
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef ERR_set_mark
+#undef sunw_ERR_set_mark
 #ifdef __cplusplus
 extern "C"
 #endif
-char ERR_set_mark ();
-#if defined __stub_ERR_set_mark || defined __stub___ERR_set_mark
+char sunw_ERR_set_mark ();
+#if defined __stub_sunw_ERR_set_mark || defined __stub___sunw_ERR_set_mark
 choke me
 #endif
 
 int main (void)
 {
-return ERR_set_mark ();
+return sunw_ERR_set_mark ();
  ;
  return 0;
 }
@@ -21377,24 +21403,24 @@
 /* end confdefs.h.  */
 
 
-#define ERR_peek_last_error innocuous_ERR_peek_last_error
+#define sunw_ERR_peek_last_error innocuous_sunw_ERR_peek_last_error
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef ERR_peek_last_error
+#undef sunw_ERR_peek_last_error
 #ifdef __cplusplus
 extern "C"
 #endif
-char ERR_peek_last_error ();
-#if defined __stub_ERR_peek_last_error || defined __stub___ERR_peek_last_error
+char sunw_ERR_peek_last_error ();
+#if defined __stub_sunw_ERR_peek_last_error || defined __stub___sunw_ERR_peek_last_error
 choke me
 #endif
 
 int main (void)
 {
-return ERR_peek_last_error ();
+return sunw_ERR_peek_last_error ();
  ;
  return 0;
 }
@@ -21413,24 +21439,24 @@
 /* end confdefs.h.  */
 
 
-#define c2i_ASN1_OBJECT innocuous_c2i_ASN1_OBJECT
+#define sunw_c2i_ASN1_OBJECT innocuous_sunw_c2i_ASN1_OBJECT
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef c2i_ASN1_OBJECT
+#undef sunw_c2i_ASN1_OBJECT
 #ifdef __cplusplus
 extern "C"
 #endif
-char c2i_ASN1_OBJECT ();
-#if defined __stub_c2i_ASN1_OBJECT || defined __stub___c2i_ASN1_OBJECT
+char sunw_c2i_ASN1_OBJECT ();
+#if defined __stub_sunw_c2i_ASN1_OBJECT || defined __stub___sunw_c2i_ASN1_OBJECT
 choke me
 #endif
 
 int main (void)
 {
-return c2i_ASN1_OBJECT ();
+return sunw_c2i_ASN1_OBJECT ();
  ;
  return 0;
 }
@@ -21449,24 +21475,24 @@
 /* end confdefs.h.  */
 
 
-#define SSL_CTX_set_purpose innocuous_SSL_CTX_set_purpose
+#define sunw_SSL_CTX_set_purpose innocuous_sunw_SSL_CTX_set_purpose
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef SSL_CTX_set_purpose
+#undef sunw_SSL_CTX_set_purpose
 #ifdef __cplusplus
 extern "C"
 #endif
-char SSL_CTX_set_purpose ();
-#if defined __stub_SSL_CTX_set_purpose || defined __stub___SSL_CTX_set_purpose
+char sunw_SSL_CTX_set_purpose ();
+#if defined __stub_sunw_SSL_CTX_set_purpose || defined __stub___sunw_SSL_CTX_set_purpose
 choke me
 #endif
 
 int main (void)
 {
-return SSL_CTX_set_purpose ();
+return sunw_SSL_CTX_set_purpose ();
  ;
  return 0;
 }
@@ -21485,24 +21511,24 @@
 /* end confdefs.h.  */
 
 
-#define OBJ_obj2txt innocuous_OBJ_obj2txt
+#define sunw_OBJ_obj2txt innocuous_sunw_OBJ_obj2txt
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef OBJ_obj2txt
+#undef sunw_OBJ_obj2txt
 #ifdef __cplusplus
 extern "C"
 #endif
-char OBJ_obj2txt ();
-#if defined __stub_OBJ_obj2txt || defined __stub___OBJ_obj2txt
+char sunw_OBJ_obj2txt ();
+#if defined __stub_sunw_OBJ_obj2txt || defined __stub___sunw_OBJ_obj2txt
 choke me
 #endif
 
 int main (void)
 {
-return OBJ_obj2txt ();
+return sunw_OBJ_obj2txt ();
  ;
  return 0;
 }
@@ -21521,24 +21547,24 @@
 /* end confdefs.h.  */
 
 
-#define SSL_get_verify_depth innocuous_SSL_get_verify_depth
+#define sunw_SSL_get_verify_depth innocuous_sunw_SSL_get_verify_depth
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef SSL_get_verify_depth
+#undef sunw_SSL_get_verify_depth
 #ifdef __cplusplus
 extern "C"
 #endif
-char SSL_get_verify_depth ();
-#if defined __stub_SSL_get_verify_depth || defined __stub___SSL_get_verify_depth
+char sunw_SSL_get_verify_depth ();
+#if defined __stub_sunw_SSL_get_verify_depth || defined __stub___sunw_SSL_get_verify_depth
 choke me
 #endif
 
 int main (void)
 {
-return SSL_get_verify_depth ();
+return sunw_SSL_get_verify_depth ();
  ;
  return 0;
 }
@@ -21557,24 +21583,24 @@
 /* end confdefs.h.  */
 
 
-#define SSL_library_init innocuous_SSL_library_init
+#define sunw_SSL_library_init innocuous_sunw_SSL_library_init
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef SSL_library_init
+#undef sunw_SSL_library_init
 #ifdef __cplusplus
 extern "C"
 #endif
-char SSL_library_init ();
-#if defined __stub_SSL_library_init || defined __stub___SSL_library_init
+char sunw_SSL_library_init ();
+#if defined __stub_sunw_SSL_library_init || defined __stub___sunw_SSL_library_init
 choke me
 #endif
 
 int main (void)
 {
-return SSL_library_init ();
+return sunw_SSL_library_init ();
  ;
  return 0;
 }
@@ -21593,24 +21619,24 @@
 /* end confdefs.h.  */
 
 
-#define SSL_CTX_set_cipher_list innocuous_SSL_CTX_set_cipher_list
+#define sunw_SSL_CTX_set_cipher_list innocuous_sunw_SSL_CTX_set_cipher_list
 #ifdef __STDC__
 # include <limits.h>
 #else
 # include <assert.h>
 #endif
-#undef SSL_CTX_set_cipher_list
+#undef sunw_SSL_CTX_set_cipher_list
 #ifdef __cplusplus
 extern "C"
 #endif
-char SSL_CTX_set_cipher_list ();
-#if defined __stub_SSL_CTX_set_cipher_list || defined __stub___SSL_CTX_set_cipher_list
+char sunw_SSL_CTX_set_cipher_list ();
+#if defined __stub_sunw_SSL_CTX_set_cipher_list || defined __stub___sunw_SSL_CTX_set_cipher_list
 choke me
 #endif
 
 int main (void)
 {
-return SSL_CTX_set_cipher_list ();
+return sunw_SSL_CTX_set_cipher_list ();
  ;
  return 0;
 }
@@ -21691,7 +21717,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inflateEnd in -lz" >&5
 $as_echo_n "checking for inflateEnd in -lz... " >&6; }
-if test "${ac_cv_lib_z_inflateEnd+set}" = set; then :
+if ${ac_cv_lib_z_inflateEnd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -21722,7 +21748,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_z_inflateEnd" >&5
 $as_echo "$ac_cv_lib_z_inflateEnd" >&6; }
-if test "x$ac_cv_lib_z_inflateEnd" = x""yes; then :
+if test "x$ac_cv_lib_z_inflateEnd" = xyes; then :
                      HAVE_LIBZ="1"
 else
                      OPT_ZLIB="/usr/local"
@@ -21737,13 +21763,13 @@
   fi
 
   ac_fn_c_check_header_mongrel "$LINENO" "zlib.h" "ac_cv_header_zlib_h" "$ac_includes_default"
-if test "x$ac_cv_header_zlib_h" = x""yes; then :
+if test "x$ac_cv_header_zlib_h" = xyes; then :
 
         HAVE_ZLIB_H="1"
         if test "$HAVE_LIBZ" != "1"; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gzread in -lz" >&5
 $as_echo_n "checking for gzread in -lz... " >&6; }
-if test "${ac_cv_lib_z_gzread+set}" = set; then :
+if ${ac_cv_lib_z_gzread+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -21774,7 +21800,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_z_gzread" >&5
 $as_echo "$ac_cv_lib_z_gzread" >&6; }
-if test "x$ac_cv_lib_z_gzread" = x""yes; then :
+if test "x$ac_cv_lib_z_gzread" = xyes; then :
 
                                       HAVE_LIBZ="1"
 
@@ -21858,22 +21884,24 @@
 else
 
           if test x$cross_compiling != xyes; then
-                        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for \"/dev/urandom\"" >&5
+                        as_ac_File=`$as_echo "ac_cv_file_"/dev/urandom"" | $as_tr_sh`
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for \"/dev/urandom\"" >&5
 $as_echo_n "checking for \"/dev/urandom\"... " >&6; }
-if test "${ac_cv_file___dev_urandom_+set}" = set; then :
+if eval \${$as_ac_File+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   test "$cross_compiling" = yes &&
-  as_fn_error "cannot check for file existence when cross compiling" "$LINENO" 5
+  as_fn_error $? "cannot check for file existence when cross compiling" "$LINENO" 5
 if test -r ""/dev/urandom""; then
-  ac_cv_file___dev_urandom_=yes
+  eval "$as_ac_File=yes"
 else
-  ac_cv_file___dev_urandom_=no
+  eval "$as_ac_File=no"
 fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_file___dev_urandom_" >&5
-$as_echo "$ac_cv_file___dev_urandom_" >&6; }
-if test "x$ac_cv_file___dev_urandom_" = x""yes; then :
+eval ac_res=\$$as_ac_File
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+if eval test \"x\$"$as_ac_File"\" = x"yes"; then :
    RANDOM_FILE="/dev/urandom"
 fi
 
@@ -21898,7 +21926,7 @@
 if test "$OPENSSL_ENABLED" = "1"; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SRP_Calc_client_key in -lcrypto" >&5
 $as_echo_n "checking for SRP_Calc_client_key in -lcrypto... " >&6; }
-if test "${ac_cv_lib_crypto_SRP_Calc_client_key+set}" = set; then :
+if ${ac_cv_lib_crypto_SRP_Calc_client_key+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -21929,7 +21957,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_SRP_Calc_client_key" >&5
 $as_echo "$ac_cv_lib_crypto_SRP_Calc_client_key" >&6; }
-if test "x$ac_cv_lib_crypto_SRP_Calc_client_key" = x""yes; then :
+if test "x$ac_cv_lib_crypto_SRP_Calc_client_key" = xyes; then :
 
 
 $as_echo "#define HAVE_SSLEAY_SRP 1" >>confdefs.h
@@ -21966,7 +21994,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -22011,7 +22039,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -22122,7 +22150,7 @@
 
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gnutls_check_version in -lgnutls" >&5
 $as_echo_n "checking for gnutls_check_version in -lgnutls... " >&6; }
-if test "${ac_cv_lib_gnutls_gnutls_check_version+set}" = set; then :
+if ${ac_cv_lib_gnutls_gnutls_check_version+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22153,7 +22181,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gnutls_gnutls_check_version" >&5
 $as_echo "$ac_cv_lib_gnutls_gnutls_check_version" >&6; }
-if test "x$ac_cv_lib_gnutls_gnutls_check_version" = x""yes; then :
+if test "x$ac_cv_lib_gnutls_gnutls_check_version" = xyes; then :
 
 
 $as_echo "#define USE_GNUTLS 1" >>confdefs.h
@@ -22197,7 +22225,7 @@
   # First check if we can detect either crypto library via transitive linking
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nettle_MD5Init in -lgnutls" >&5
 $as_echo_n "checking for nettle_MD5Init in -lgnutls... " >&6; }
-if test "${ac_cv_lib_gnutls_nettle_MD5Init+set}" = set; then :
+if ${ac_cv_lib_gnutls_nettle_MD5Init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22228,14 +22256,14 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gnutls_nettle_MD5Init" >&5
 $as_echo "$ac_cv_lib_gnutls_nettle_MD5Init" >&6; }
-if test "x$ac_cv_lib_gnutls_nettle_MD5Init" = x""yes; then :
+if test "x$ac_cv_lib_gnutls_nettle_MD5Init" = xyes; then :
    USE_GNUTLS_NETTLE=1
 fi
 
   if test "$USE_GNUTLS_NETTLE" = ""; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gcry_control in -lgnutls" >&5
 $as_echo_n "checking for gcry_control in -lgnutls... " >&6; }
-if test "${ac_cv_lib_gnutls_gcry_control+set}" = set; then :
+if ${ac_cv_lib_gnutls_gcry_control+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22266,7 +22294,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gnutls_gcry_control" >&5
 $as_echo "$ac_cv_lib_gnutls_gcry_control" >&6; }
-if test "x$ac_cv_lib_gnutls_gcry_control" = x""yes; then :
+if test "x$ac_cv_lib_gnutls_gcry_control" = xyes; then :
    USE_GNUTLS_NETTLE=0
 fi
 
@@ -22275,7 +22303,7 @@
   if test "$USE_GNUTLS_NETTLE" = ""; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nettle_MD5Init in -lnettle" >&5
 $as_echo_n "checking for nettle_MD5Init in -lnettle... " >&6; }
-if test "${ac_cv_lib_nettle_nettle_MD5Init+set}" = set; then :
+if ${ac_cv_lib_nettle_nettle_MD5Init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22306,7 +22334,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nettle_nettle_MD5Init" >&5
 $as_echo "$ac_cv_lib_nettle_nettle_MD5Init" >&6; }
-if test "x$ac_cv_lib_nettle_nettle_MD5Init" = x""yes; then :
+if test "x$ac_cv_lib_nettle_nettle_MD5Init" = xyes; then :
    USE_GNUTLS_NETTLE=1
 fi
 
@@ -22314,7 +22342,7 @@
   if test "$USE_GNUTLS_NETTLE" = ""; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gcry_control in -lgcrypt" >&5
 $as_echo_n "checking for gcry_control in -lgcrypt... " >&6; }
-if test "${ac_cv_lib_gcrypt_gcry_control+set}" = set; then :
+if ${ac_cv_lib_gcrypt_gcry_control+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22345,13 +22373,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gcrypt_gcry_control" >&5
 $as_echo "$ac_cv_lib_gcrypt_gcry_control" >&6; }
-if test "x$ac_cv_lib_gcrypt_gcry_control" = x""yes; then :
+if test "x$ac_cv_lib_gcrypt_gcry_control" = xyes; then :
    USE_GNUTLS_NETTLE=0
 fi
 
   fi
   if test "$USE_GNUTLS_NETTLE" = ""; then
-    as_fn_error "GnuTLS found, but neither gcrypt nor nettle found" "$LINENO" 5
+    as_fn_error $? "GnuTLS found, but neither gcrypt nor nettle found" "$LINENO" 5
   fi
   if test "$USE_GNUTLS_NETTLE" = "1"; then
 
@@ -22368,7 +22396,7 @@
 if test "$GNUTLS_ENABLED" = "1"; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gnutls_srp_verifier in -lgnutls" >&5
 $as_echo_n "checking for gnutls_srp_verifier in -lgnutls... " >&6; }
-if test "${ac_cv_lib_gnutls_gnutls_srp_verifier+set}" = set; then :
+if ${ac_cv_lib_gnutls_gnutls_srp_verifier+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22399,7 +22427,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gnutls_gnutls_srp_verifier" >&5
 $as_echo "$ac_cv_lib_gnutls_gnutls_srp_verifier" >&6; }
-if test "x$ac_cv_lib_gnutls_gnutls_srp_verifier" = x""yes; then :
+if test "x$ac_cv_lib_gnutls_gnutls_srp_verifier" = xyes; then :
 
 
 $as_echo "#define HAVE_GNUTLS_SRP 1" >>confdefs.h
@@ -22435,7 +22463,7 @@
 
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for havege_init in -lpolarssl" >&5
 $as_echo_n "checking for havege_init in -lpolarssl... " >&6; }
-if test "${ac_cv_lib_polarssl_havege_init+set}" = set; then :
+if ${ac_cv_lib_polarssl_havege_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22466,7 +22494,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_polarssl_havege_init" >&5
 $as_echo "$ac_cv_lib_polarssl_havege_init" >&6; }
-if test "x$ac_cv_lib_polarssl_havege_init" = x""yes; then :
+if test "x$ac_cv_lib_polarssl_havege_init" = xyes; then :
 
 
 $as_echo "#define USE_POLARSSL 1" >>confdefs.h
@@ -22493,7 +22521,7 @@
 
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ssl_init in -lpolarssl" >&5
 $as_echo_n "checking for ssl_init in -lpolarssl... " >&6; }
-if test "${ac_cv_lib_polarssl_ssl_init+set}" = set; then :
+if ${ac_cv_lib_polarssl_ssl_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22524,7 +22552,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_polarssl_ssl_init" >&5
 $as_echo "$ac_cv_lib_polarssl_ssl_init" >&6; }
-if test "x$ac_cv_lib_polarssl_ssl_init" = x""yes; then :
+if test "x$ac_cv_lib_polarssl_ssl_init" = xyes; then :
 
 
 $as_echo "#define USE_POLARSSL 1" >>confdefs.h
@@ -22588,7 +22616,7 @@
 
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CyaSSL_Init in -lcyassl" >&5
 $as_echo_n "checking for CyaSSL_Init in -lcyassl... " >&6; }
-if test "${ac_cv_lib_cyassl_CyaSSL_Init+set}" = set; then :
+if ${ac_cv_lib_cyassl_CyaSSL_Init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22619,7 +22647,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_cyassl_CyaSSL_Init" >&5
 $as_echo "$ac_cv_lib_cyassl_CyaSSL_Init" >&6; }
-if test "x$ac_cv_lib_cyassl_CyaSSL_Init" = x""yes; then :
+if test "x$ac_cv_lib_cyassl_CyaSSL_Init" = xyes; then :
 
 
 $as_echo "#define USE_CYASSL 1" >>confdefs.h
@@ -22646,7 +22674,7 @@
 
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CyaSSL_Init in -lcyassl" >&5
 $as_echo_n "checking for CyaSSL_Init in -lcyassl... " >&6; }
-if test "${ac_cv_lib_cyassl_CyaSSL_Init+set}" = set; then :
+if ${ac_cv_lib_cyassl_CyaSSL_Init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22677,7 +22705,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_cyassl_CyaSSL_Init" >&5
 $as_echo "$ac_cv_lib_cyassl_CyaSSL_Init" >&6; }
-if test "x$ac_cv_lib_cyassl_CyaSSL_Init" = x""yes; then :
+if test "x$ac_cv_lib_cyassl_CyaSSL_Init" = xyes; then :
 
 
 $as_echo "#define USE_CYASSL 1" >>confdefs.h
@@ -22742,7 +22770,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -22787,7 +22815,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -22887,7 +22915,7 @@
 
             { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PK11_CreateGenericObject in -lnss3" >&5
 $as_echo_n "checking for PK11_CreateGenericObject in -lnss3... " >&6; }
-if test "${ac_cv_lib_nss3_PK11_CreateGenericObject+set}" = set; then :
+if ${ac_cv_lib_nss3_PK11_CreateGenericObject+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22918,7 +22946,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nss3_PK11_CreateGenericObject" >&5
 $as_echo "$ac_cv_lib_nss3_PK11_CreateGenericObject" >&6; }
-if test "x$ac_cv_lib_nss3_PK11_CreateGenericObject" = x""yes; then :
+if test "x$ac_cv_lib_nss3_PK11_CreateGenericObject" = xyes; then :
 
 
 $as_echo "#define USE_NSS 1" >>confdefs.h
@@ -22942,7 +22970,7 @@
 $as_echo "$as_me: detected NSS version $version" >&6;}
 
                         ac_fn_c_check_func "$LINENO" "NSS_InitContext" "ac_cv_func_NSS_InitContext"
-if test "x$ac_cv_func_NSS_InitContext" = x""yes; then :
+if test "x$ac_cv_func_NSS_InitContext" = xyes; then :
 
 
 $as_echo "#define HAVE_NSS_INITCONTEXT 1" >>confdefs.h
@@ -23000,7 +23028,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ssl_version in -laxtls" >&5
 $as_echo_n "checking for ssl_version in -laxtls... " >&6; }
-if test "${ac_cv_lib_axtls_ssl_version+set}" = set; then :
+if ${ac_cv_lib_axtls_ssl_version+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -23031,7 +23059,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_axtls_ssl_version" >&5
 $as_echo "$ac_cv_lib_axtls_ssl_version" >&6; }
-if test "x$ac_cv_lib_axtls_ssl_version" = x""yes; then :
+if test "x$ac_cv_lib_axtls_ssl_version" = xyes; then :
 
       LIBS="-laxtls $LIBS"
 
@@ -23083,7 +23111,7 @@
   withval=$with_ca_bundle;
     want_ca="$withval"
     if test "x$want_ca" = "xyes"; then
-      as_fn_error "--with-ca-bundle=FILE requires a path to the CA bundle" "$LINENO" 5
+      as_fn_error $? "--with-ca-bundle=FILE requires a path to the CA bundle" "$LINENO" 5
     fi
 
 else
@@ -23096,7 +23124,7 @@
   withval=$with_ca_path;
     want_capath="$withval"
     if test "x$want_capath" = "xyes"; then
-      as_fn_error "--with-ca-path=DIRECTORY requires a path to the CA path directory" "$LINENO" 5
+      as_fn_error $? "--with-ca-path=DIRECTORY requires a path to the CA path directory" "$LINENO" 5
     fi
 
 else
@@ -23106,13 +23134,13 @@
 
   if test "x$want_ca" != "xno" -a "x$want_ca" != "xunset" -a \
           "x$want_capath" != "xno" -a "x$want_capath" != "xunset"; then
-        as_fn_error "Can't specify both --with-ca-bundle and --with-ca-path." "$LINENO" 5
+        as_fn_error $? "Can't specify both --with-ca-bundle and --with-ca-path." "$LINENO" 5
   elif test "x$want_ca" != "xno" -a "x$want_ca" != "xunset"; then
         ca="$want_ca"
     capath="no"
   elif test "x$want_capath" != "xno" -a "x$want_capath" != "xunset"; then
         if test "x$OPENSSL_ENABLED" != "x1"; then
-      as_fn_error "--with-ca-path only works with openSSL" "$LINENO" 5
+      as_fn_error $? "--with-ca-path only works with openSSL" "$LINENO" 5
     fi
     capath="$want_capath"
     ca="no"
@@ -23205,7 +23233,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -23250,7 +23278,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -23327,7 +23355,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -23372,7 +23400,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -23549,7 +23577,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -23594,7 +23622,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -23684,7 +23712,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for libssh2_channel_open_ex in -lssh2" >&5
 $as_echo_n "checking for libssh2_channel_open_ex in -lssh2... " >&6; }
-if test "${ac_cv_lib_ssh2_libssh2_channel_open_ex+set}" = set; then :
+if ${ac_cv_lib_ssh2_libssh2_channel_open_ex+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -23715,7 +23743,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssh2_libssh2_channel_open_ex" >&5
 $as_echo "$ac_cv_lib_ssh2_libssh2_channel_open_ex" >&6; }
-if test "x$ac_cv_lib_ssh2_libssh2_channel_open_ex" = x""yes; then :
+if test "x$ac_cv_lib_ssh2_libssh2_channel_open_ex" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBSSH2 1
 _ACEOF
@@ -23728,7 +23756,7 @@
   for ac_header in libssh2.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "libssh2.h" "ac_cv_header_libssh2_h" "$ac_includes_default"
-if test "x$ac_cv_header_libssh2_h" = x""yes; then :
+if test "x$ac_cv_header_libssh2_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBSSH2_H 1
 _ACEOF
@@ -23747,7 +23775,7 @@
 
   if test X"$OPT_LIBSSH2" != Xoff &&
      test "$LIBSSH2_ENABLED" != "1"; then
-    as_fn_error "libSSH2 libs and/or directories were not found where specified!" "$LINENO" 5
+    as_fn_error $? "libSSH2 libs and/or directories were not found where specified!" "$LINENO" 5
   fi
 
   if test "$LIBSSH2_ENABLED" = "1"; then
@@ -23758,8 +23786,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -23806,7 +23833,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -23851,7 +23878,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -23919,7 +23946,7 @@
       version=`$PKGCONFIG --modversion librtmp`
       DIR_RTMP=`echo $LD_RTMP | $SED -e 's/-L//'`
     else
-                  as_fn_error "--librtmp was specified but could not find librtmp pkgconfig file." "$LINENO" 5
+                  as_fn_error $? "--librtmp was specified but could not find librtmp pkgconfig file." "$LINENO" 5
     fi
 
     ;;
@@ -23943,7 +23970,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for RTMP_Init in -lrtmp" >&5
 $as_echo_n "checking for RTMP_Init in -lrtmp... " >&6; }
-if test "${ac_cv_lib_rtmp_RTMP_Init+set}" = set; then :
+if ${ac_cv_lib_rtmp_RTMP_Init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -23974,12 +24001,12 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_rtmp_RTMP_Init" >&5
 $as_echo "$ac_cv_lib_rtmp_RTMP_Init" >&6; }
-if test "x$ac_cv_lib_rtmp_RTMP_Init" = x""yes; then :
+if test "x$ac_cv_lib_rtmp_RTMP_Init" = xyes; then :
 
      for ac_header in librtmp/rtmp.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "librtmp/rtmp.h" "ac_cv_header_librtmp_rtmp_h" "$ac_includes_default"
-if test "x$ac_cv_header_librtmp_rtmp_h" = x""yes; then :
+if test "x$ac_cv_header_librtmp_rtmp_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBRTMP_RTMP_H 1
 _ACEOF
@@ -24006,7 +24033,7 @@
 
   if test X"$OPT_LIBRTMP" != Xoff &&
      test "$LIBRTMP_ENABLED" != "1"; then
-    as_fn_error "librtmp libs and/or directories were not found where specified!" "$LINENO" 5
+    as_fn_error $? "librtmp libs and/or directories were not found where specified!" "$LINENO" 5
   fi
 
 fi
@@ -24244,7 +24271,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -24289,7 +24316,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -24385,7 +24412,7 @@
 set dummy ${host}-pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -24430,7 +24457,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKGCONFIG+set}" = set; then :
+if ${ac_cv_path_PKGCONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKGCONFIG in
@@ -24623,8 +24650,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -24636,8 +24662,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -24678,7 +24703,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
 $as_echo_n "checking for ANSI C header files... " >&6; }
-if test "${ac_cv_header_stdc+set}" = set; then :
+if ${ac_cv_header_stdc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24791,7 +24816,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for malloc.h" >&5
 $as_echo_n "checking for malloc.h... " >&6; }
-if test "${ac_cv_header_malloc_h+set}" = set; then :
+if ${ac_cv_header_malloc_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -24879,7 +24904,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for memory.h" >&5
 $as_echo_n "checking for memory.h... " >&6; }
-if test "${ac_cv_header_memory_h+set}" = set; then :
+if ${ac_cv_header_memory_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -25030,8 +25055,7 @@
 
 
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -25043,7 +25067,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
 $as_echo_n "checking for an ANSI C-conforming const... " >&6; }
-if test "${ac_cv_c_const+set}" = set; then :
+if ${ac_cv_c_const+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25123,7 +25147,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for compiler support of C99 variadic macro style" >&5
 $as_echo_n "checking for compiler support of C99 variadic macro style... " >&6; }
-if test "${curl_cv_variadic_macros_c99+set}" = set; then :
+if ${curl_cv_variadic_macros_c99+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -25176,7 +25200,7 @@
   esac
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for compiler support of old gcc variadic macro style" >&5
 $as_echo_n "checking for compiler support of old gcc variadic macro style... " >&6; }
-if test "${curl_cv_variadic_macros_gcc+set}" = set; then :
+if ${curl_cv_variadic_macros_gcc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -25229,7 +25253,7 @@
   esac
 
 ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
-if test "x$ac_cv_type_size_t" = x""yes; then :
+if test "x$ac_cv_type_size_t" = xyes; then :
 
 else
 
@@ -25241,7 +25265,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether time.h and sys/time.h may both be included" >&5
 $as_echo_n "checking whether time.h and sys/time.h may both be included... " >&6; }
-if test "${ac_cv_header_time+set}" = set; then :
+if ${ac_cv_header_time+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25278,8 +25302,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -25290,7 +25313,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct timeval" >&5
 $as_echo_n "checking for struct timeval... " >&6; }
-if test "${ac_cv_struct_timeval+set}" = set; then :
+if ${ac_cv_struct_timeval+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -25374,8 +25397,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -25392,7 +25415,7 @@
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: failed" >&5
 $as_echo "failed" >&6; }
-    as_fn_error "one or more libs available at link-time are not available run-time. Libs used at link-time: $LIBS" "$LINENO" 5
+    as_fn_error $? "one or more libs available at link-time are not available run-time. Libs used at link-time: $LIBS" "$LINENO" 5
 
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -25409,7 +25432,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of size_t" >&5
 $as_echo_n "checking size of size_t... " >&6; }
-if test "${ac_cv_sizeof_size_t+set}" = set; then :
+if ${ac_cv_sizeof_size_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (size_t))" "ac_cv_sizeof_size_t"        "$ac_includes_default"; then :
@@ -25418,9 +25441,8 @@
   if test "$ac_cv_type_size_t" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (size_t)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (size_t)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_size_t=0
    fi
@@ -25443,7 +25465,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
 $as_echo_n "checking size of long... " >&6; }
-if test "${ac_cv_sizeof_long+set}" = set; then :
+if ${ac_cv_sizeof_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :
@@ -25452,9 +25474,8 @@
   if test "$ac_cv_type_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_long=0
    fi
@@ -25477,7 +25498,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
 $as_echo_n "checking size of int... " >&6; }
-if test "${ac_cv_sizeof_int+set}" = set; then :
+if ${ac_cv_sizeof_int+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :
@@ -25486,9 +25507,8 @@
   if test "$ac_cv_type_int" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (int)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (int)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_int=0
    fi
@@ -25511,7 +25531,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of short" >&5
 $as_echo_n "checking size of short... " >&6; }
-if test "${ac_cv_sizeof_short+set}" = set; then :
+if ${ac_cv_sizeof_short+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (short))" "ac_cv_sizeof_short"        "$ac_includes_default"; then :
@@ -25520,9 +25540,8 @@
   if test "$ac_cv_type_short" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (short)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (short)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_short=0
    fi
@@ -25542,7 +25561,7 @@
 
   if test -z "$ac_cv_sizeof_long" ||
     test "$ac_cv_sizeof_long" -eq "0"; then
-    as_fn_error "cannot find out size of long." "$LINENO" 5
+    as_fn_error $? "cannot find out size of long." "$LINENO" 5
   fi
 
 cat >>confdefs.h <<_EOF
@@ -25556,7 +25575,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of time_t" >&5
 $as_echo_n "checking size of time_t... " >&6; }
-if test "${ac_cv_sizeof_time_t+set}" = set; then :
+if ${ac_cv_sizeof_time_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (time_t))" "ac_cv_sizeof_time_t"        "$ac_includes_default"; then :
@@ -25565,9 +25584,8 @@
   if test "$ac_cv_type_time_t" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (time_t)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (time_t)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_time_t=0
    fi
@@ -25590,7 +25608,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of off_t" >&5
 $as_echo_n "checking size of off_t... " >&6; }
-if test "${ac_cv_sizeof_off_t+set}" = set; then :
+if ${ac_cv_sizeof_off_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (off_t))" "ac_cv_sizeof_off_t"        "$ac_includes_default"; then :
@@ -25599,9 +25617,8 @@
   if test "$ac_cv_type_off_t" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (off_t)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (off_t)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_off_t=0
    fi
@@ -25631,7 +25648,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "long long" "ac_cv_type_long_long" "$ac_includes_default"
-if test "x$ac_cv_type_long_long" = x""yes; then :
+if test "x$ac_cv_type_long_long" = xyes; then :
 
 $as_echo "#define HAVE_LONGLONG 1" >>confdefs.h
 
@@ -25678,7 +25695,7 @@
 
 # check for ssize_t
 ac_fn_c_check_type "$LINENO" "ssize_t" "ac_cv_type_ssize_t" "$ac_includes_default"
-if test "x$ac_cv_type_ssize_t" = x""yes; then :
+if test "x$ac_cv_type_ssize_t" = xyes; then :
 
 else
 
@@ -25697,7 +25714,7 @@
 #endif
 
 "
-if test "x$ac_cv_type_bool" = x""yes; then :
+if test "x$ac_cv_type_bool" = xyes; then :
 
 
 $as_echo "#define HAVE_BOOL_T 1" >>confdefs.h
@@ -25725,7 +25742,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for windows.h" >&5
 $as_echo_n "checking for windows.h... " >&6; }
-if test "${ac_cv_header_windows_h+set}" = set; then :
+if ${ac_cv_header_windows_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -25785,7 +25802,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for winsock2.h" >&5
 $as_echo_n "checking for winsock2.h... " >&6; }
-if test "${ac_cv_header_winsock2_h+set}" = set; then :
+if ${ac_cv_header_winsock2_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -25841,7 +25858,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ws2tcpip.h" >&5
 $as_echo_n "checking for ws2tcpip.h... " >&6; }
-if test "${ac_cv_header_ws2tcpip_h+set}" = set; then :
+if ${ac_cv_header_ws2tcpip_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -25911,8 +25928,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_sys_socket
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -26003,7 +26019,7 @@
 $as_echo "$curl_typeof_curl_socklen_t" >&6; }
   if test "$curl_typeof_curl_socklen_t" = "void" ||
     test "$curl_typeof_curl_socklen_t" = "unknown"; then
-    as_fn_error "cannot find data type for curl_socklen_t." "$LINENO" 5
+    as_fn_error $? "cannot find data type for curl_socklen_t." "$LINENO" 5
   fi
   #
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of curl_socklen_t" >&5
@@ -26065,7 +26081,7 @@
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $curl_sizeof_curl_socklen_t" >&5
 $as_echo "$curl_sizeof_curl_socklen_t" >&6; }
   if test "$curl_sizeof_curl_socklen_t" = "unknown"; then
-    as_fn_error "cannot find out size of curl_socklen_t." "$LINENO" 5
+    as_fn_error $? "cannot find out size of curl_socklen_t." "$LINENO" 5
   fi
   #
   case $curl_pull_headers_socklen_t in
@@ -26139,13 +26155,13 @@
 #endif
 
 "
-if test "x$ac_cv_type_in_addr_t" = x""yes; then :
+if test "x$ac_cv_type_in_addr_t" = xyes; then :
 
 else
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for in_addr_t equivalent" >&5
 $as_echo_n "checking for in_addr_t equivalent... " >&6; }
-if test "${curl_cv_in_addr_t_equiv+set}" = set; then :
+if ${curl_cv_in_addr_t_equiv+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -26209,7 +26225,7 @@
 $as_echo "$curl_cv_in_addr_t_equiv" >&6; }
     case "$curl_cv_in_addr_t_equiv" in
       unknown)
-        as_fn_error "Cannot find a type to use in place of in_addr_t" "$LINENO" 5
+        as_fn_error $? "Cannot find a type to use in place of in_addr_t" "$LINENO" 5
         ;;
       *)
 
@@ -26251,7 +26267,7 @@
 #endif
 
 "
-if test "x$ac_cv_type_struct_sockaddr_storage" = x""yes; then :
+if test "x$ac_cv_type_struct_sockaddr_storage" = xyes; then :
 
 $as_echo "#define HAVE_STRUCT_SOCKADDR_STORAGE 1" >>confdefs.h
 
@@ -26263,7 +26279,7 @@
   for ac_header in signal.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "signal.h" "ac_cv_header_signal_h" "$ac_includes_default"
-if test "x$ac_cv_header_signal_h" = x""yes; then :
+if test "x$ac_cv_header_signal_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SIGNAL_H 1
 _ACEOF
@@ -26278,7 +26294,7 @@
 #endif
 
 "
-if test "x$ac_cv_type_sig_atomic_t" = x""yes; then :
+if test "x$ac_cv_type_sig_atomic_t" = xyes; then :
 
 
 $as_echo "#define HAVE_SIG_ATOMIC_T 1" >>confdefs.h
@@ -26336,7 +26352,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking return type of signal handlers" >&5
 $as_echo_n "checking return type of signal handlers... " >&6; }
-if test "${ac_cv_type_signal+set}" = set; then :
+if ${ac_cv_type_signal+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26372,8 +26388,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -26454,7 +26469,7 @@
   if test "$curl_cv_select" = "yes"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking types of args and return type for select" >&5
 $as_echo_n "checking types of args and return type for select... " >&6; }
-if test "${curl_cv_func_select_args+set}" = set; then :
+if ${curl_cv_func_select_args+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -26630,8 +26645,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -26698,7 +26712,7 @@
   if test "$curl_cv_recv" = "yes"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking types of args and return type for recv" >&5
 $as_echo_n "checking types of args and return type for recv... " >&6; }
-if test "${curl_cv_func_recv_args+set}" = set; then :
+if ${curl_cv_func_recv_args+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -26770,7 +26784,7 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $curl_cv_func_recv_args" >&5
 $as_echo "$curl_cv_func_recv_args" >&6; } # AC-CACHE-CHECK
     if test "$curl_cv_func_recv_args" = "unknown"; then
-      as_fn_error "Cannot find proper types to use for recv args" "$LINENO" 5
+      as_fn_error $? "Cannot find proper types to use for recv args" "$LINENO" 5
     else
       recv_prev_IFS=$IFS; IFS=','
       set dummy `echo "$curl_cv_func_recv_args" | sed 's/\*/\*/g'`
@@ -26811,7 +26825,7 @@
       ac_cv_func_recv="yes"
     fi
   else
-    as_fn_error "Unable to link function recv" "$LINENO" 5
+    as_fn_error $? "Unable to link function recv" "$LINENO" 5
   fi
 
 
@@ -26819,8 +26833,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -26887,7 +26900,7 @@
   if test "$curl_cv_recvfrom" = "yes"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking types of args and return type for recvfrom" >&5
 $as_echo_n "checking types of args and return type for recvfrom... " >&6; }
-if test "${curl_cv_func_recvfrom_args+set}" = set; then :
+if ${curl_cv_func_recvfrom_args+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -27102,8 +27115,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -27170,7 +27182,7 @@
   if test "$curl_cv_send" = "yes"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking types of args and return type for send" >&5
 $as_echo_n "checking types of args and return type for send... " >&6; }
-if test "${curl_cv_func_send_args+set}" = set; then :
+if ${curl_cv_func_send_args+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -27241,7 +27253,7 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $curl_cv_func_send_args" >&5
 $as_echo "$curl_cv_func_send_args" >&6; } # AC-CACHE-CHECK
     if test "$curl_cv_func_send_args" = "unknown"; then
-      as_fn_error "Cannot find proper types to use for send args" "$LINENO" 5
+      as_fn_error $? "Cannot find proper types to use for send args" "$LINENO" 5
     else
       send_prev_IFS=$IFS; IFS=','
       set dummy `echo "$curl_cv_func_send_args" | sed 's/\*/\*/g'`
@@ -27319,7 +27331,7 @@
       ac_cv_func_send="yes"
     fi
   else
-    as_fn_error "Unable to link function send" "$LINENO" 5
+    as_fn_error $? "Unable to link function send" "$LINENO" 5
   fi
 
 
@@ -27327,8 +27339,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -27339,7 +27350,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for MSG_NOSIGNAL" >&5
 $as_echo_n "checking for MSG_NOSIGNAL... " >&6; }
-if test "${ac_cv_msg_nosignal+set}" = set; then :
+if ${ac_cv_msg_nosignal+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -27419,8 +27430,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_unistd
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -27597,8 +27607,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_string
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -27623,8 +27632,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_libgen
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -27802,8 +27810,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_socket
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -28257,8 +28264,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_fcntl
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -28512,8 +28518,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_stdio
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -28687,8 +28692,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_netdb
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -28862,8 +28866,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_ifaddrs
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -29036,8 +29039,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_sys_xattr
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -29420,8 +29422,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_stdlib
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -29551,8 +29552,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -31002,8 +31003,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -31354,8 +31355,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_time
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -31488,8 +31488,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -31591,8 +31591,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_arpa_inet
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -31936,8 +31935,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -32183,8 +32182,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -32324,8 +32323,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_stropts
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -33192,8 +33190,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -33480,8 +33478,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_poll
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -33610,8 +33607,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -33924,8 +33921,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_signal
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -34397,8 +34393,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_setjmp
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -35665,8 +35660,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -35768,8 +35763,8 @@
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -37110,8 +37105,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$curl_includes_sys_uio
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -37300,8 +37294,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -37359,8 +37352,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -37511,7 +37503,7 @@
   if test "$curl_cv_getnameinfo" = "yes"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking types of arguments for getnameinfo" >&5
 $as_echo_n "checking types of arguments for getnameinfo... " >&6; }
-if test "${curl_cv_func_getnameinfo_args+set}" = set; then :
+if ${curl_cv_func_getnameinfo_args+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -37681,8 +37673,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -37694,7 +37685,7 @@
   #
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working NI_WITHSCOPEID" >&5
 $as_echo_n "checking for working NI_WITHSCOPEID... " >&6; }
-if test "${ac_cv_working_ni_withscopeid+set}" = set; then :
+if ${ac_cv_working_ni_withscopeid+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -37889,7 +37880,7 @@
 set dummy perl; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PERL+set}" = set; then :
+if ${ac_cv_path_PERL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PERL in
@@ -37934,7 +37925,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_NROFF+set}" = set; then :
+if ${ac_cv_path_NROFF+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $NROFF in
@@ -38099,7 +38090,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
-        as_fn_error "c-ares library defective or too old" "$LINENO" 5
+        as_fn_error $? "c-ares library defective or too old" "$LINENO" 5
                 CPPFLAGS="$clean_CPPFLAGS"
         LDFLAGS="$clean_LDFLAGS"
         LIBS="$clean_LIBS"
@@ -38170,12 +38161,12 @@
 
 
 if test "x$want_thres" = xyes && test "x$want_ares" = xyes; then
-  as_fn_error "Options --enable-threaded-resolver and --enable-ares are mutually exclusive" "$LINENO" 5
+  as_fn_error $? "Options --enable-threaded-resolver and --enable-ares are mutually exclusive" "$LINENO" 5
 fi
 
 if test "$want_thres" = "yes"; then
   ac_fn_c_check_header_mongrel "$LINENO" "pthread.h" "ac_cv_header_pthread_h" "$ac_includes_default"
-if test "x$ac_cv_header_pthread_h" = x""yes; then :
+if test "x$ac_cv_header_pthread_h" = xyes; then :
 
 $as_echo "#define HAVE_PTHREAD_H 1" >>confdefs.h
 
@@ -38183,7 +38174,7 @@
       CFLAGS="$CFLAGS -pthread"
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -lpthread" >&5
 $as_echo_n "checking for pthread_create in -lpthread... " >&6; }
-if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then :
+if ${ac_cv_lib_pthread_pthread_create+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -38214,7 +38205,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_create" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_create" >&6; }
-if test "x$ac_cv_lib_pthread_pthread_create" = x""yes; then :
+if test "x$ac_cv_lib_pthread_pthread_create" = xyes; then :
    { $as_echo "$as_me:${as_lineno-$LINENO}: using POSIX threaded DNS lookup" >&5
 $as_echo "$as_me: using POSIX threaded DNS lookup" >&6;}
 
@@ -38721,10 +38712,21 @@
      :end' >>confcache
 if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
   if test -w "$cache_file"; then
-    test "x$cache_file" != "x/dev/null" &&
+    if test "x$cache_file" != "x/dev/null"; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
 $as_echo "$as_me: updating cache $cache_file" >&6;}
-    cat confcache >$cache_file
+      if test ! -f "$cache_file" || test -h "$cache_file"; then
+	cat confcache >"$cache_file"
+      else
+        case $cache_file in #(
+        */* | ?:*)
+	  mv -f confcache "$cache_file"$$ &&
+	  mv -f "$cache_file"$$ "$cache_file" ;; #(
+        *)
+	  mv -f confcache "$cache_file" ;;
+	esac
+      fi
+    fi
   else
     { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
 $as_echo "$as_me: not updating unwritable cache $cache_file" >&6;}
@@ -38740,6 +38742,7 @@
 
 ac_libobjs=
 ac_ltlibobjs=
+U=
 for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
   # 1. Remove the extension, and $U if already installed.
   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
@@ -38755,79 +38758,79 @@
 
 
 if test -z "${MAINTAINER_MODE_TRUE}" && test -z "${MAINTAINER_MODE_FALSE}"; then
-  as_fn_error "conditional \"MAINTAINER_MODE\" was never defined.
+  as_fn_error $? "conditional \"MAINTAINER_MODE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${AMDEP_TRUE}" && test -z "${AMDEP_FALSE}"; then
-  as_fn_error "conditional \"AMDEP\" was never defined.
+  as_fn_error $? "conditional \"AMDEP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
-  as_fn_error "conditional \"am__fastdepCC\" was never defined.
+  as_fn_error $? "conditional \"am__fastdepCC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${MIMPURE_TRUE}" && test -z "${MIMPURE_FALSE}"; then
-  as_fn_error "conditional \"MIMPURE\" was never defined.
+  as_fn_error $? "conditional \"MIMPURE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${USE_CPPFLAG_BUILDING_LIBCURL_TRUE}" && test -z "${USE_CPPFLAG_BUILDING_LIBCURL_FALSE}"; then
-  as_fn_error "conditional \"USE_CPPFLAG_BUILDING_LIBCURL\" was never defined.
+  as_fn_error $? "conditional \"USE_CPPFLAG_BUILDING_LIBCURL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${USE_CPPFLAG_CURL_STATICLIB_TRUE}" && test -z "${USE_CPPFLAG_CURL_STATICLIB_FALSE}"; then
-  as_fn_error "conditional \"USE_CPPFLAG_CURL_STATICLIB\" was never defined.
+  as_fn_error $? "conditional \"USE_CPPFLAG_CURL_STATICLIB\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${NO_UNDEFINED_TRUE}" && test -z "${NO_UNDEFINED_FALSE}"; then
-  as_fn_error "conditional \"NO_UNDEFINED\" was never defined.
+  as_fn_error $? "conditional \"NO_UNDEFINED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${CURLDEBUG_TRUE}" && test -z "${CURLDEBUG_FALSE}"; then
-  as_fn_error "conditional \"CURLDEBUG\" was never defined.
+  as_fn_error $? "conditional \"CURLDEBUG\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_UNITTESTS_TRUE}" && test -z "${BUILD_UNITTESTS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_UNITTESTS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_UNITTESTS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${DOING_NATIVE_WINDOWS_TRUE}" && test -z "${DOING_NATIVE_WINDOWS_FALSE}"; then
-  as_fn_error "conditional \"DOING_NATIVE_WINDOWS\" was never defined.
+  as_fn_error $? "conditional \"DOING_NATIVE_WINDOWS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${HAVE_LIBZ_TRUE}" && test -z "${HAVE_LIBZ_FALSE}"; then
-  as_fn_error "conditional \"HAVE_LIBZ\" was never defined.
+  as_fn_error $? "conditional \"HAVE_LIBZ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${VERSIONED_SYMBOLS_TRUE}" && test -z "${VERSIONED_SYMBOLS_FALSE}"; then
-  as_fn_error "conditional \"VERSIONED_SYMBOLS\" was never defined.
+  as_fn_error $? "conditional \"VERSIONED_SYMBOLS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${USE_MANUAL_TRUE}" && test -z "${USE_MANUAL_FALSE}"; then
-  as_fn_error "conditional \"USE_MANUAL\" was never defined.
+  as_fn_error $? "conditional \"USE_MANUAL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${USE_EMBEDDED_ARES_TRUE}" && test -z "${USE_EMBEDDED_ARES_FALSE}"; then
-  as_fn_error "conditional \"USE_EMBEDDED_ARES\" was never defined.
+  as_fn_error $? "conditional \"USE_EMBEDDED_ARES\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_LIBHOSTNAME_TRUE}" && test -z "${BUILD_LIBHOSTNAME_FALSE}"; then
-  as_fn_error "conditional \"BUILD_LIBHOSTNAME\" was never defined.
+  as_fn_error $? "conditional \"BUILD_LIBHOSTNAME\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${DOING_CURL_SYMBOL_HIDING_TRUE}" && test -z "${DOING_CURL_SYMBOL_HIDING_FALSE}"; then
-  as_fn_error "conditional \"DOING_CURL_SYMBOL_HIDING\" was never defined.
+  as_fn_error $? "conditional \"DOING_CURL_SYMBOL_HIDING\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${SONAME_BUMP_TRUE}" && test -z "${SONAME_BUMP_FALSE}"; then
-  as_fn_error "conditional \"SONAME_BUMP\" was never defined.
+  as_fn_error $? "conditional \"SONAME_BUMP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${CROSSCOMPILING_TRUE}" && test -z "${CROSSCOMPILING_FALSE}"; then
-  as_fn_error "conditional \"CROSSCOMPILING\" was never defined.
+  as_fn_error $? "conditional \"CROSSCOMPILING\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 
-: ${CONFIG_STATUS=./config.status}
+: "${CONFIG_STATUS=./config.status}"
 ac_write_fail=0
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files $CONFIG_STATUS"
@@ -38920,6 +38923,7 @@
 IFS=" ""	$as_nl"
 
 # Find who we are.  Look in the path if we contain no directory separator.
+as_myself=
 case $0 in #((
   *[\\/]* ) as_myself=$0 ;;
   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -38965,19 +38969,19 @@
 (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 
-# as_fn_error ERROR [LINENO LOG_FD]
-# ---------------------------------
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with status $?, using 1 if that was 0.
+# script with STATUS, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$?; test $as_status -eq 0 && as_status=1
-  if test "$3"; then
-    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $1" >&2
+  $as_echo "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
@@ -39173,7 +39177,7 @@
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
@@ -39227,7 +39231,7 @@
 # values after options handling.
 ac_log="
 This file was extended by curl $as_me -, which was
-generated by GNU Autoconf 2.64.  Invocation command line was
+generated by GNU Autoconf 2.68.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
@@ -39267,6 +39271,7 @@
 
   -h, --help       print this help, then exit
   -V, --version    print version number and configuration settings, then exit
+      --config     print configuration, then exit
   -q, --quiet, --silent
                    do not print progress messages
   -d, --debug      don't remove temporary files
@@ -39289,12 +39294,13 @@
 
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
 ac_cs_version="\\
 curl config.status -
-configured by $0, generated by GNU Autoconf 2.64,
-  with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
+configured by $0, generated by GNU Autoconf 2.68,
+  with options \\"\$ac_cs_config\\"
 
-Copyright (C) 2009 Free Software Foundation, Inc.
+Copyright (C) 2010 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
 
@@ -39311,11 +39317,16 @@
 while test $# != 0
 do
   case $1 in
-  --*=*)
+  --*=?*)
     ac_option=`expr "X$1" : 'X\([^=]*\)='`
     ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
     ac_shift=:
     ;;
+  --*=)
+    ac_option=`expr "X$1" : 'X\([^=]*\)='`
+    ac_optarg=
+    ac_shift=:
+    ;;
   *)
     ac_option=$1
     ac_optarg=$2
@@ -39329,12 +39340,15 @@
     ac_cs_recheck=: ;;
   --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
     $as_echo "$ac_cs_version"; exit ;;
+  --config | --confi | --conf | --con | --co | --c )
+    $as_echo "$ac_cs_config"; exit ;;
   --debug | --debu | --deb | --de | --d | -d )
     debug=: ;;
   --file | --fil | --fi | --f )
     $ac_shift
     case $ac_optarg in
     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    '') as_fn_error $? "missing file argument" ;;
     esac
     as_fn_append CONFIG_FILES " '$ac_optarg'"
     ac_need_defaults=false;;
@@ -39347,7 +39361,7 @@
     ac_need_defaults=false;;
   --he | --h)
     # Conflict between --help and --header
-    as_fn_error "ambiguous option: \`$1'
+    as_fn_error $? "ambiguous option: \`$1'
 Try \`$0 --help' for more information.";;
   --help | --hel | -h )
     $as_echo "$ac_cs_usage"; exit ;;
@@ -39356,7 +39370,7 @@
     ac_cs_silent=: ;;
 
   # This is an error.
-  -*) as_fn_error "unrecognized option: \`$1'
+  -*) as_fn_error $? "unrecognized option: \`$1'
 Try \`$0 --help' for more information." ;;
 
   *) as_fn_append ac_config_targets " $1"
@@ -39724,7 +39738,7 @@
     "curl-config") CONFIG_FILES="$CONFIG_FILES curl-config" ;;
     "libcurl.pc") CONFIG_FILES="$CONFIG_FILES libcurl.pc" ;;
 
-  *) as_fn_error "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
+  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
   esac
 done
 
@@ -39747,9 +39761,10 @@
 # after its creation but before its name has been assigned to `$tmp'.
 $debug ||
 {
-  tmp=
+  tmp= ac_tmp=
   trap 'exit_status=$?
-  { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
+  : "${ac_tmp:=$tmp}"
+  { test ! -d "$ac_tmp" || rm -fr "$ac_tmp"; } && exit $exit_status
 ' 0
   trap 'as_fn_exit 1' 1 2 13 15
 }
@@ -39757,12 +39772,13 @@
 
 {
   tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
-  test -n "$tmp" && test -d "$tmp"
+  test -d "$tmp"
 }  ||
 {
   tmp=./conf$$-$RANDOM
   (umask 077 && mkdir "$tmp")
-} || as_fn_error "cannot create a temporary directory in ." "$LINENO" 5
+} || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
+ac_tmp=$tmp
 
 # Set up the scripts for CONFIG_FILES section.
 # No need to generate them if there are no CONFIG_FILES.
@@ -39779,12 +39795,12 @@
 fi
 ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
 if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
-  ac_cs_awk_cr='\r'
+  ac_cs_awk_cr='\\r'
 else
   ac_cs_awk_cr=$ac_cr
 fi
 
-echo 'BEGIN {' >"$tmp/subs1.awk" &&
+echo 'BEGIN {' >"$ac_tmp/subs1.awk" &&
 _ACEOF
 
 
@@ -39793,18 +39809,18 @@
   echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
   echo "_ACEOF"
 } >conf$$subs.sh ||
-  as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
-ac_delim_num=`echo "$ac_subst_vars" | grep -c '$'`
+  as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
 ac_delim='%!_!# '
 for ac_last_try in false false false false false :; do
   . ./conf$$subs.sh ||
-    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
 
   ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
   if test $ac_delim_n = $ac_delim_num; then
     break
   elif $ac_last_try; then
-    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
@@ -39812,7 +39828,7 @@
 rm -f conf$$subs.sh
 
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
-cat >>"\$tmp/subs1.awk" <<\\_ACAWK &&
+cat >>"\$ac_tmp/subs1.awk" <<\\_ACAWK &&
 _ACEOF
 sed -n '
 h
@@ -39826,7 +39842,7 @@
 t delim
 :nl
 h
-s/\(.\{148\}\).*/\1/
+s/\(.\{148\}\)..*/\1/
 t more1
 s/["\\]/\\&/g; s/^/"/; s/$/\\n"\\/
 p
@@ -39840,7 +39856,7 @@
 t nl
 :delim
 h
-s/\(.\{148\}\).*/\1/
+s/\(.\{148\}\)..*/\1/
 t more2
 s/["\\]/\\&/g; s/^/"/; s/$/"/
 p
@@ -39860,7 +39876,7 @@
 rm -f conf$$subs.awk
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 _ACAWK
-cat >>"\$tmp/subs1.awk" <<_ACAWK &&
+cat >>"\$ac_tmp/subs1.awk" <<_ACAWK &&
   for (key in S) S_is_set[key] = 1
   FS = ""
 
@@ -39892,21 +39908,29 @@
   sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
 else
   cat
-fi < "$tmp/subs1.awk" > "$tmp/subs.awk" \
-  || as_fn_error "could not setup config files machinery" "$LINENO" 5
+fi < "$ac_tmp/subs1.awk" > "$ac_tmp/subs.awk" \
+  || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
 _ACEOF
 
-# VPATH may cause trouble with some makes, so we remove $(srcdir),
-# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# VPATH may cause trouble with some makes, so we remove sole $(srcdir),
+# ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
 # trailing colons and then remove the whole line if VPATH becomes empty
 # (actually we leave an empty line to preserve line numbers).
 if test "x$srcdir" = x.; then
-  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
-s/:*\$(srcdir):*/:/
-s/:*\${srcdir}:*/:/
-s/:*@srcdir@:*/:/
-s/^\([^=]*=[	 ]*\):*/\1/
+  ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
+h
+s///
+s/^/:/
+s/[	 ]*$/:/
+s/:\$(srcdir):/:/g
+s/:\${srcdir}:/:/g
+s/:@srcdir@:/:/g
+s/^:*//
 s/:*$//
+x
+s/\(=[	 ]*\).*/\1/
+G
+s/\n//
 s/^[^=]*=[	 ]*$//
 }'
 fi
@@ -39918,7 +39942,7 @@
 # No need to generate them if there are no CONFIG_HEADERS.
 # This happens for instance with `./config.status Makefile'.
 if test -n "$CONFIG_HEADERS"; then
-cat >"$tmp/defines.awk" <<\_ACAWK ||
+cat >"$ac_tmp/defines.awk" <<\_ACAWK ||
 BEGIN {
 _ACEOF
 
@@ -39930,11 +39954,11 @@
 # handling of long lines.
 ac_delim='%!_!# '
 for ac_last_try in false false :; do
-  ac_t=`sed -n "/$ac_delim/p" confdefs.h`
-  if test -z "$ac_t"; then
+  ac_tt=`sed -n "/$ac_delim/p" confdefs.h`
+  if test -z "$ac_tt"; then
     break
   elif $ac_last_try; then
-    as_fn_error "could not make $CONFIG_HEADERS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
@@ -40019,7 +40043,7 @@
 _ACAWK
 _ACEOF
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
-  as_fn_error "could not setup config headers machinery" "$LINENO" 5
+  as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
 fi # test -n "$CONFIG_HEADERS"
 
 
@@ -40032,7 +40056,7 @@
   esac
   case $ac_mode$ac_tag in
   :[FHL]*:*);;
-  :L* | :C*:*) as_fn_error "invalid tag \`$ac_tag'" "$LINENO" 5;;
+  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
   :[FH]-) ac_tag=-:-;;
   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
   esac
@@ -40051,7 +40075,7 @@
     for ac_f
     do
       case $ac_f in
-      -) ac_f="$tmp/stdin";;
+      -) ac_f="$ac_tmp/stdin";;
       *) # Look for the file first in the build tree, then in the source tree
 	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
 	 # because $ac_f cannot contain `:'.
@@ -40060,7 +40084,7 @@
 	   [\\/$]*) false;;
 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
 	   esac ||
-	   as_fn_error "cannot find input file: \`$ac_f'" "$LINENO" 5;;
+	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
       esac
       case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
       as_fn_append ac_file_inputs " '$ac_f'"
@@ -40086,8 +40110,8 @@
     esac
 
     case $ac_tag in
-    *:-:* | *:-) cat >"$tmp/stdin" \
-      || as_fn_error "could not create $ac_file" "$LINENO" 5 ;;
+    *:-:* | *:-) cat >"$ac_tmp/stdin" \
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
     esac
     ;;
   esac
@@ -40217,23 +40241,24 @@
 s&@INSTALL@&$ac_INSTALL&;t t
 $ac_datarootdir_hack
 "
-eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$tmp/subs.awk" >$tmp/out \
-  || as_fn_error "could not create $ac_file" "$LINENO" 5
+eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$ac_tmp/subs.awk" \
+  >$ac_tmp/out || as_fn_error $? "could not create $ac_file" "$LINENO" 5
 
 test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
-  { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
-  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
+  { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
+  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
+      "$ac_tmp/out"`; test -z "$ac_out"; } &&
   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&5
+which seems to be undefined.  Please make sure it is defined" >&5
 $as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&2;}
+which seems to be undefined.  Please make sure it is defined" >&2;}
 
-  rm -f "$tmp/stdin"
+  rm -f "$ac_tmp/stdin"
   case $ac_file in
-  -) cat "$tmp/out" && rm -f "$tmp/out";;
-  *) rm -f "$ac_file" && mv "$tmp/out" "$ac_file";;
+  -) cat "$ac_tmp/out" && rm -f "$ac_tmp/out";;
+  *) rm -f "$ac_file" && mv "$ac_tmp/out" "$ac_file";;
   esac \
-  || as_fn_error "could not create $ac_file" "$LINENO" 5
+  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
  ;;
   :H)
   #
@@ -40242,21 +40267,21 @@
   if test x"$ac_file" != x-; then
     {
       $as_echo "/* $configure_input  */" \
-      && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs"
-    } >"$tmp/config.h" \
-      || as_fn_error "could not create $ac_file" "$LINENO" 5
-    if diff "$ac_file" "$tmp/config.h" >/dev/null 2>&1; then
+      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
+    } >"$ac_tmp/config.h" \
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+    if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
 $as_echo "$as_me: $ac_file is unchanged" >&6;}
     else
       rm -f "$ac_file"
-      mv "$tmp/config.h" "$ac_file" \
-	|| as_fn_error "could not create $ac_file" "$LINENO" 5
+      mv "$ac_tmp/config.h" "$ac_file" \
+	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
     fi
   else
     $as_echo "/* $configure_input  */" \
-      && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs" \
-      || as_fn_error "could not create -" "$LINENO" 5
+      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
+      || as_fn_error $? "could not create -" "$LINENO" 5
   fi
 # Compute "$ac_file"'s index in $config_headers.
 _am_stamp_count=1
@@ -41026,7 +41051,7 @@
 ac_clean_files=$ac_clean_files_save
 
 test $ac_write_fail = 0 ||
-  as_fn_error "write failure creating $CONFIG_STATUS" "$LINENO" 5
+  as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
 
 
 # configure is writing to config.log, and then calls config.status.
@@ -41047,7 +41072,7 @@
   exec 5>>config.log
   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
   # would make configure fail if this is the last instruction.
-  $ac_cs_success || as_fn_exit $?
+  $ac_cs_success || as_fn_exit 1
 fi
 
 #
@@ -41188,7 +41213,7 @@
       # The eval makes quoting arguments work.
       eval "\$SHELL \"\$ac_sub_configure\" $ac_sub_configure_args \
 	   --cache-file=\"\$ac_sub_cache_file\" --srcdir=\"\$ac_srcdir\"" ||
-	as_fn_error "$ac_sub_configure failed for $ac_dir" "$LINENO" 5
+	as_fn_error $? "$ac_sub_configure failed for $ac_dir" "$LINENO" 5
     fi
 
     cd "$ac_popdir"
diff -ur curl-7.27.0/configure.ac curl-7.27.0-32/configure.ac
--- curl-7.27.0/configure.ac	2012-07-27 18:25:09.000000000 +0000
+++ curl-7.27.0-32/configure.ac	2013-01-12 01:53:04.606114207 +0000
@@ -1508,13 +1508,13 @@
       ;;
   esac
 
-  AC_CHECK_LIB(crypto, CRYPTO_lock,[
+  AC_CHECK_LIB(crypto, sunw_CRYPTO_lock,[
      HAVECRYPTO="yes"
      LIBS="-lcrypto $LIBS"
      ],[
      LDFLAGS="$CLEANLDFLAGS -L$LIB_OPENSSL"
      CPPFLAGS="$CLEANCPPFLAGS -I$PREFIX_OPENSSL/include/openssl -I$PREFIX_OPENSSL/include"
-     AC_CHECK_LIB(crypto, CRYPTO_add_lock,[
+     AC_CHECK_LIB(crypto, sunw_CRYPTO_add_lock,[
        HAVECRYPTO="yes"
        LIBS="-lcrypto $LIBS"], [
        LDFLAGS="$CLEANLDFLAGS"
@@ -1528,15 +1528,15 @@
     dnl This is only reasonable to do if crypto actually is there: check for
     dnl SSL libs NOTE: it is important to do this AFTER the crypto lib
 
-    AC_CHECK_LIB(ssl, SSL_connect)
+    AC_CHECK_LIB(ssl, sunw_SSL_connect)
 
-    if test "$ac_cv_lib_ssl_SSL_connect" != yes; then
+    if test "$ac_cv_lib_ssl_sunw_SSL_connect" != yes; then
         dnl we didn't find the SSL lib, try the RSAglue/rsaref stuff
         AC_MSG_CHECKING(for ssl with RSAglue/rsaref libs in use);
         OLIBS=$LIBS
         LIBS="$LIBS -lRSAglue -lrsaref"
-        AC_CHECK_LIB(ssl, SSL_connect)
-        if test "$ac_cv_lib_ssl_SSL_connect" != yes; then
+        AC_CHECK_LIB(ssl, sunw_SSL_connect)
+        if test "$ac_cv_lib_ssl_sunw_SSL_connect" != yes; then
             dnl still no SSL_connect
             AC_MSG_RESULT(no)
             LIBS=$OLIBS
@@ -1591,22 +1591,22 @@
   if test X"$OPENSSL_ENABLED" = X"1"; then
     dnl If the ENGINE library seems to be around, check for the OpenSSL engine
     dnl stuff, it is kind of "separated" from the main SSL check
-    AC_CHECK_FUNC(ENGINE_init,
+    AC_CHECK_FUNC(sunw_ENGINE_init,
               [
                 AC_CHECK_HEADERS(openssl/engine.h)
-                AC_CHECK_FUNCS( ENGINE_load_builtin_engines )
+                AC_CHECK_FUNCS( sunw_ENGINE_load_builtin_engines )
               ])
 
     dnl these can only exist if openssl exists
     dnl yassl doesn't have SSL_get_shutdown
 
-    AC_CHECK_FUNCS( RAND_status \
-                    RAND_screen \
-                    RAND_egd \
-                    ENGINE_cleanup \
-                    CRYPTO_cleanup_all_ex_data \
-                    SSL_get_shutdown \
-                    SSLv2_client_method )
+    AC_CHECK_FUNCS( sunw_RAND_status \
+                    sunw_RAND_screen \
+                    sunw_RAND_egd \
+                    sunw_ENGINE_cleanup \
+                    sunw_CRYPTO_cleanup_all_ex_data \
+                    sunw_SSL_get_shutdown \
+                    sunw_SSLv2_client_method )
 
     dnl Make an attempt to detect if this is actually yassl's headers and
     dnl OpenSSL emulation layer. We still leave everything else believing
diff -ur curl-7.27.0/m4/curl-openssl.m4 curl-7.27.0-32/m4/curl-openssl.m4
--- curl-7.27.0/m4/curl-openssl.m4	2012-03-08 19:35:25.000000000 +0000
+++ curl-7.27.0-32/m4/curl-openssl.m4	2013-01-12 01:56:54.780435404 +0000
@@ -131,7 +131,7 @@
         ;;
       *)
         AC_LINK_IFELSE([
-          AC_LANG_FUNC_LINK_TRY([SSL_CTX_set_not_resumable_session_callback])
+          AC_LANG_FUNC_LINK_TRY([sunw_SSL_CTX_set_not_resumable_session_callback])
         ],[
           tst_api="0x110"
         ])
@@ -140,70 +140,70 @@
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([SSL_renegotiate_abbreviated])
+      AC_LANG_FUNC_LINK_TRY([sunw_SSL_renegotiate_abbreviated])
     ],[
       tst_api="0x101"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([OBJ_add_sigid])
+      AC_LANG_FUNC_LINK_TRY([sunw_OBJ_add_sigid])
     ],[
       tst_api="0x100"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([ERR_set_mark])
+      AC_LANG_FUNC_LINK_TRY([sunw_ERR_set_mark])
     ],[
       tst_api="0x098"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([ERR_peek_last_error])
+      AC_LANG_FUNC_LINK_TRY([sunw_ERR_peek_last_error])
     ],[
       tst_api="0x097"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([c2i_ASN1_OBJECT])
+      AC_LANG_FUNC_LINK_TRY([sunw_c2i_ASN1_OBJECT])
     ],[
       tst_api="0x096"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([SSL_CTX_set_purpose])
+      AC_LANG_FUNC_LINK_TRY([sunw_SSL_CTX_set_purpose])
     ],[
       tst_api="0x095"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([OBJ_obj2txt])
+      AC_LANG_FUNC_LINK_TRY([sunw_OBJ_obj2txt])
     ],[
       tst_api="0x094"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([SSL_get_verify_depth])
+      AC_LANG_FUNC_LINK_TRY([sunw_SSL_get_verify_depth])
     ],[
       tst_api="0x093"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([SSL_library_init])
+      AC_LANG_FUNC_LINK_TRY([sunw_SSL_library_init])
     ],[
       tst_api="0x092"
     ])
   fi
   if test "$tst_api" = "unknown"; then
     AC_LINK_IFELSE([
-      AC_LANG_FUNC_LINK_TRY([SSL_CTX_set_cipher_list])
+      AC_LANG_FUNC_LINK_TRY([sunw_SSL_CTX_set_cipher_list])
     ],[
       tst_api="0x091"
     ])
